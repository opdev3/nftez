var LT;(()=>{"use strict";function e(e){return Array.from((new TextEncoder).encode(e),(e=>e.toString(16).padStart(2,"0"))).join("")}function t(e){const t=new Uint8Array(e.length/2);for(let r=0;r!==t.length;r++)t[r]=parseInt(e.substr(2*r,2),16);return(new TextDecoder).decode(t)}function r(e){return e&&e.length>14?e.substring(0,5)+"..."+e.substring(e.length-5):e}function i(e){if(navigator.clipboard)return navigator.clipboard.writeText(e).then((function(){}),(function(e){return!1})),!0;let t=!1;var r=document.createElement("textarea");r.value=e,r.style.top="0",r.style.left="0",r.style.position="fixed",document.body.appendChild(r),r.focus(),r.select();try{document.execCommand("copy"),t=!0}catch(e){}return document.body.removeChild(r),t}function n(e){return/^(tz|KT)[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{34}$/.test(String(e))}function a(){try{return(new Error).stack.split("\n")[2].replace(/^\s+at\s+(.+?)\s.+/g,"$1")}catch(e){return""}}const s=window.location,o=(s.host+s.pathname).indexOf("testnet")>=0||(s.host+s.pathname).indexOf("ghostnet")>=0,m=!s.protocol.startsWith("http"),c=o?"ghostnet":"mainnet",l=o?"KT1VCnPM6SKpvza6TLkbNcoxAgS6B61JLGtE":"KT1ULc5LQazQorDUjacBieq5puEGFQZ6jorT",d=o?"KT1TRuN4Uc4ai6ZjWRjtedX9ChmfcfvxfBXt":"KT1KyPvhak54X3yiozebqhPhnqrtWNTiaWm1",p="-1835576114,-1889653220,-1513923773",g='{"code":[{"prim":"storage","args":[{"prim":"pair","args":[{"prim":"pair","args":[{"prim":"address","annots":["%administrator"]},{"prim":"pair","args":[{"prim":"nat","annots":["%all_tokens"]},{"prim":"big_map","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]},{"prim":"nat"}],"annots":["%ledger"]}]}]},{"prim":"pair","args":[{"prim":"pair","args":[{"prim":"big_map","args":[{"prim":"string"},{"prim":"bytes"}],"annots":["%metadata"]},{"prim":"big_map","args":[{"prim":"pair","args":[{"prim":"address","annots":["%owner"]},{"prim":"pair","args":[{"prim":"address","annots":["%operator"]},{"prim":"nat","annots":["%token_id"]}]}]},{"prim":"unit"}],"annots":["%operators"]}]},{"prim":"pair","args":[{"prim":"big_map","args":[{"prim":"nat"},{"prim":"pair","args":[{"prim":"nat","annots":["%token_id"]},{"prim":"map","args":[{"prim":"string"},{"prim":"bytes"}],"annots":["%token_info"]}]}],"annots":["%token_metadata"]},{"prim":"big_map","args":[{"prim":"nat"},{"prim":"nat"}],"annots":["%total_supply"]}]}]}]}]},{"prim":"parameter","args":[{"prim":"or","args":[{"prim":"or","args":[{"prim":"pair","args":[{"prim":"list","args":[{"prim":"pair","args":[{"prim":"address","annots":["%owner"]},{"prim":"nat","annots":["%token_id"]}]}],"annots":["%requests"]},{"prim":"contract","args":[{"prim":"list","args":[{"prim":"pair","args":[{"prim":"pair","args":[{"prim":"address","annots":["%owner"]},{"prim":"nat","annots":["%token_id"]}],"annots":["%request"]},{"prim":"nat","annots":["%balance"]}]}]}],"annots":["%callback"]}],"annots":["%balance_of"]},{"prim":"pair","args":[{"prim":"nat","annots":["%amount"]},{"prim":"nat","annots":["%token_id"]}],"annots":["%burn"]}]},{"prim":"or","args":[{"prim":"pair","args":[{"prim":"address","annots":["%address"]},{"prim":"pair","args":[{"prim":"nat","annots":["%amount"]},{"prim":"map","args":[{"prim":"string"},{"prim":"bytes"}],"annots":["%metadata"]}]}],"annots":["%mint"]},{"prim":"or","args":[{"prim":"list","args":[{"prim":"pair","args":[{"prim":"address","annots":["%from_"]},{"prim":"list","args":[{"prim":"pair","args":[{"prim":"address","annots":["%to_"]},{"prim":"pair","args":[{"prim":"nat","annots":["%token_id"]},{"prim":"nat","annots":["%amount"]}]}]}],"annots":["%txs"]}]}],"annots":["%transfer"]},{"prim":"list","args":[{"prim":"or","args":[{"prim":"pair","args":[{"prim":"address","annots":["%owner"]},{"prim":"pair","args":[{"prim":"address","annots":["%operator"]},{"prim":"nat","annots":["%token_id"]}]}],"annots":["%add_operator"]},{"prim":"pair","args":[{"prim":"address","annots":["%owner"]},{"prim":"pair","args":[{"prim":"address","annots":["%operator"]},{"prim":"nat","annots":["%token_id"]}]}],"annots":["%remove_operator"]}]}],"annots":["%update_operators"]}]}]}]}]},{"prim":"code","args":[[{"prim":"CAST","args":[{"prim":"pair","args":[{"prim":"or","args":[{"prim":"or","args":[{"prim":"pair","args":[{"prim":"list","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]}]},{"prim":"contract","args":[{"prim":"list","args":[{"prim":"pair","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]},{"prim":"nat"}]}]}]}]},{"prim":"pair","args":[{"prim":"nat"},{"prim":"nat"}]}]},{"prim":"or","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"pair","args":[{"prim":"nat"},{"prim":"map","args":[{"prim":"string"},{"prim":"bytes"}]}]}]},{"prim":"or","args":[{"prim":"list","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"list","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"pair","args":[{"prim":"nat"},{"prim":"nat"}]}]}]}]}]},{"prim":"list","args":[{"prim":"or","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]}]},{"prim":"pair","args":[{"prim":"address"},{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]}]}]}]}]}]}]},{"prim":"pair","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"pair","args":[{"prim":"nat"},{"prim":"big_map","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]},{"prim":"nat"}]}]}]},{"prim":"pair","args":[{"prim":"pair","args":[{"prim":"big_map","args":[{"prim":"string"},{"prim":"bytes"}]},{"prim":"big_map","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]}]},{"prim":"unit"}]}]},{"prim":"pair","args":[{"prim":"big_map","args":[{"prim":"nat"},{"prim":"pair","args":[{"prim":"nat"},{"prim":"map","args":[{"prim":"string"},{"prim":"bytes"}]}]}]},{"prim":"big_map","args":[{"prim":"nat"},{"prim":"nat"}]}]}]}]}]}]},{"prim":"UNPAIR"},{"prim":"IF_LEFT","args":[[{"prim":"IF_LEFT","args":[[{"prim":"DUP"},{"prim":"CAR"},{"prim":"MAP","args":[[{"prim":"DUP","args":[{"int":"3"}]},{"prim":"GET","args":[{"int":"5"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CDR"},{"prim":"MEM"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_TOKEN_UNDEFINED"}]},{"prim":"FAILWITH"}]]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CDR"},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"MEM"},{"prim":"IF","args":[[{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CDR"},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"434"}]},{"prim":"FAILWITH"}],[]]},{"prim":"SWAP"},{"prim":"PAIR"}],[{"prim":"PUSH","args":[{"prim":"nat"},{"int":"0"}]},{"prim":"SWAP"},{"prim":"PAIR"}]]}]]},{"prim":"NIL","args":[{"prim":"operation"}]},{"prim":"DIG","args":[{"int":"2"}]},{"prim":"CDR"},{"prim":"PUSH","args":[{"prim":"mutez"},{"int":"0"}]},{"prim":"DIG","args":[{"int":"3"}]},{"prim":"TRANSFER_TOKENS"},{"prim":"CONS"}],[{"prim":"DUP","args":[{"int":"2"}]},{"prim":"GET","args":[{"int":"5"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CDR"},{"prim":"MEM"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_TOKEN_UNDEFINED"}]},{"prim":"FAILWITH"}]]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"DIG","args":[{"int":"6"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"7"}]},{"prim":"CDR"},{"prim":"SENDER"},{"prim":"PAIR"},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"nat"},{"int":"0"}]}],[]]},{"prim":"SUB"},{"prim":"ISNAT"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_INSUFFICIENT_BALANCE"}]},{"prim":"FAILWITH"}],[]]},{"prim":"SOME"},{"prim":"DUP","args":[{"int":"6"}]},{"prim":"CDR"},{"prim":"SENDER"},{"prim":"PAIR"},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"DUP"},{"prim":"GET","args":[{"int":"6"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"DIG","args":[{"int":"4"}]},{"prim":"GET","args":[{"int":"6"}]},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CDR"},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"538"}]},{"prim":"FAILWITH"}],[]]},{"prim":"SUB"},{"prim":"ISNAT"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"538"}]},{"prim":"FAILWITH"}],[]]},{"prim":"SOME"},{"prim":"DUP","args":[{"int":"4"}]},{"prim":"CDR"},{"prim":"UPDATE"},{"prim":"UPDATE","args":[{"int":"6"}]},{"prim":"SWAP"},{"prim":"PUSH","args":[{"prim":"nat"},{"int":"0"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"GET","args":[{"int":"6"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CDR"},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"539"}]},{"prim":"FAILWITH"}],[]]},{"prim":"COMPARE"},{"prim":"EQ"},{"prim":"IF","args":[[{"prim":"SWAP"},{"prim":"DUP"},{"prim":"GET","args":[{"int":"5"}]},{"prim":"NONE","args":[{"prim":"pair","args":[{"prim":"nat"},{"prim":"map","args":[{"prim":"string"},{"prim":"bytes"}]}]}]},{"prim":"DIG","args":[{"int":"3"}]},{"prim":"CDR"},{"prim":"UPDATE"},{"prim":"UPDATE","args":[{"int":"5"}]}],[{"prim":"DROP"}]]},{"prim":"NIL","args":[{"prim":"operation"}]}]]}],[{"prim":"IF_LEFT","args":[[{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CAR"},{"prim":"CAR"},{"prim":"SENDER"},{"prim":"COMPARE"},{"prim":"EQ"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_NOT_ADMIN"}]},{"prim":"FAILWITH"}]]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"SOME"},{"prim":"DIG","args":[{"int":"6"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"7"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"DUP"},{"prim":"GET","args":[{"int":"5"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"3"}]},{"prim":"PAIR"},{"prim":"SOME"},{"prim":"DIG","args":[{"int":"4"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"3"}]},{"prim":"UPDATE"},{"prim":"UPDATE","args":[{"int":"5"}]},{"prim":"SWAP"},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"DUP"},{"prim":"GET","args":[{"int":"6"}]},{"prim":"DIG","args":[{"int":"2"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"SOME"},{"prim":"DIG","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"3"}]},{"prim":"UPDATE"},{"prim":"UPDATE","args":[{"int":"6"}]},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"PUSH","args":[{"prim":"nat"},{"int":"1"}]},{"prim":"ADD"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"}],[{"prim":"IF_LEFT","args":[[{"prim":"DUP"},{"prim":"ITER","args":[[{"prim":"DUP"},{"prim":"CDR"},{"prim":"ITER","args":[[{"prim":"SENDER"},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"COMPARE"},{"prim":"EQ"},{"prim":"IF","args":[[{"prim":"PUSH","args":[{"prim":"bool"},{"prim":"True"}]}],[{"prim":"DUP","args":[{"int":"4"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"CDR"},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"SENDER"},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"PAIR","args":[{"int":"3"}]},{"prim":"MEM"}]]},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_NOT_OPERATOR"}]},{"prim":"FAILWITH"}]]},{"prim":"DUP","args":[{"int":"4"}]},{"prim":"GET","args":[{"int":"5"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"MEM"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_TOKEN_UNDEFINED"}]},{"prim":"FAILWITH"}]]},{"prim":"PUSH","args":[{"prim":"nat"},{"int":"0"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"GET","args":[{"int":"4"}]},{"prim":"COMPARE"},{"prim":"GT"},{"prim":"IF","args":[[{"prim":"DUP"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"414"}]},{"prim":"FAILWITH"}],[]]},{"prim":"COMPARE"},{"prim":"GE"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_INSUFFICIENT_BALANCE"}]},{"prim":"FAILWITH"}]]},{"prim":"DUP"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"418"}]},{"prim":"FAILWITH"}],[]]},{"prim":"SUB"},{"prim":"ISNAT"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"418"}]},{"prim":"FAILWITH"}],[]]},{"prim":"DIG","args":[{"int":"4"}]},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"DUP"},{"prim":"DUP","args":[{"int":"7"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"9"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"DUP"},{"prim":"DUG","args":[{"int":"2"}]},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"418"}]},{"prim":"FAILWITH"}],[{"prim":"DROP"}]]},{"prim":"DIG","args":[{"int":"5"}]},{"prim":"SOME"},{"prim":"SWAP"},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"DUG","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"4"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"MEM"},{"prim":"IF","args":[[{"prim":"DIG","args":[{"int":"3"}]},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"DUP"},{"prim":"DUP","args":[{"int":"6"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"7"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"DUP"},{"prim":"DUG","args":[{"int":"2"}]},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"421"}]},{"prim":"FAILWITH"}],[]]},{"prim":"DIG","args":[{"int":"6"}]},{"prim":"GET","args":[{"int":"4"}]},{"prim":"ADD"},{"prim":"SOME"},{"prim":"SWAP"},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"DUG","args":[{"int":"2"}]}],[{"prim":"DIG","args":[{"int":"3"}]},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"GET","args":[{"int":"4"}]},{"prim":"SOME"},{"prim":"DUP","args":[{"int":"6"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DIG","args":[{"int":"6"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"DUG","args":[{"int":"2"}]}]]}],[{"prim":"DROP"}]]}]]},{"prim":"DROP"}]]},{"prim":"DROP"}],[{"prim":"DUP"},{"prim":"ITER","args":[[{"prim":"IF_LEFT","args":[[{"prim":"SENDER"},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CAR"},{"prim":"COMPARE"},{"prim":"EQ"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_NOT_OWNER"}]},{"prim":"FAILWITH"}]]},{"prim":"DIG","args":[{"int":"2"}]},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"PUSH","args":[{"prim":"option","args":[{"prim":"unit"}]},{"prim":"Some","args":[{"prim":"Unit"}]}]},{"prim":"DIG","args":[{"int":"5"}]},{"prim":"DUP"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"SWAP"},{"prim":"DUP"},{"prim":"GET","args":[{"int":"3"}]},{"prim":"SWAP"},{"prim":"CAR"},{"prim":"PAIR","args":[{"int":"3"}]},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"}],[{"prim":"SENDER"},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CAR"},{"prim":"COMPARE"},{"prim":"EQ"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_NOT_OWNER"}]},{"prim":"FAILWITH"}]]},{"prim":"DIG","args":[{"int":"2"}]},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"NONE","args":[{"prim":"unit"}]},{"prim":"DIG","args":[{"int":"5"}]},{"prim":"DUP"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"SWAP"},{"prim":"DUP"},{"prim":"GET","args":[{"int":"3"}]},{"prim":"SWAP"},{"prim":"CAR"},{"prim":"PAIR","args":[{"int":"3"}]},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"}]]}]]},{"prim":"DROP"}]]}]]},{"prim":"NIL","args":[{"prim":"operation"}]}]]},{"prim":"PAIR"}]]}],"storage":{"prim":"Pair","args":[{"prim":"Pair","args":[{"string":"${user_address}"},{"prim":"Pair","args":[{"int":"0"},[]]}]},{"prim":"Pair","args":[{"prim":"Pair","args":[[{"prim":"Elt","args":[{"string":""},{"bytes":"74657a6f732d73746f726167653a636f6e74656e74"}]},{"prim":"Elt","args":[{"string":"content"},{"bytes":"${metadata_content}"}]}],[]]},{"prim":"Pair","args":[[],[]]}]}]}}',u="ZeroTerminal";let y="";const E=new beacon.DAppClient({name:u,network:{type:c,rpcUrl:"https://rpc.tzkt.io/"+c}});async function f(e,t,r){let i="sort.desc=lastActivity&select=address,tokensCount,firstActivityTime,creator.address as creator&typeHash"+(p.indexOf(",")>=0?".in":"")+"="+p+(t?"&limit="+t:"")+(r?"&offset="+r:"")+(e?"&creator="+e:"");try{let e=await fetch("https://api."+c+".tzkt.io/v1/contracts?"+i);if(e.ok)return await e.json();console.log("ERROR "+a()+"(): can't get collections")}catch(e){console.log("ERROR "+a()+"(): "+e+JSON.stringify(e))}}async function I(e){try{let t=await fetch("https://api."+c+".tzkt.io/v1/contracts/"+e+"/bigmaps/metadata/keys?key=content&select=value");if(t.ok)return(await t.json())[0];console.log("ERROR "+a()+"(): can't get collection metadata")}catch(e){console.log("ERROR "+a()+"(): "+e+JSON.stringify(e))}}async function T(e,t){let r="sort.desc=id&active=true&select=key,value"+(e?"&value.token.address="+e:"")+(t?"&value.token.id="+t:"");try{let e=await fetch("https://api."+c+".tzkt.io/v1/contracts/"+d+"/bigmaps/offers/keys?"+r);if(e.ok){let t=await e.json();if(t&&t.length>0){let e=null;for(let r of t)r.value.seller!==y&&(e?Number(e.value.price)>=Number(r.value.price)&&(e=r):e=r);return e}}else console.log("ERROR "+a()+"(): can't get best offer")}catch(e){console.log("ERROR "+a()+"(): "+e+JSON.stringify(e))}}async function h(e,t){let r="limit=1&select=account.address as account,token,balance,firstTime&token.contract="+e+"&token.tokenid="+t;try{let e=await fetch("https://api."+c+".tzkt.io/v1/tokens/balances?"+r+"&account="+y);if(e.ok){let t=await e.json();if(t.length>0)return t[0];{let e=await fetch("https://api."+c+".tzkt.io/v1/tokens/balances?"+r);if(e.ok){if(t=await e.json(),t.length>0)return t[0].account=y,t[0].balance=0,t[0]}else console.log("ERROR "+a()+"(): can't get token")}}else console.log("ERROR "+a()+"(): can't get token balance")}catch(e){console.log("ERROR "+a()+"(): "+e+JSON.stringify(e))}}const v={message:"The address is copied",type:"is-success"};async function A(){document.getElementById("btnMoreActiveTokens").classList.add("is-loading");let e=document.getElementById("dActiveTokens"),t=0;document.getElementById("dMoreActiveLoader").classList.remove("is-hidden");let r=await async function(e,t){let r="sort.desc=lastActivity&select=contract,tokenId,totalSupply,metadata&totalSupply.gt=0&metadata.artifactUri.as=data*&limit=20"+(t?"&offset="+t:"");try{let e=await fetch("https://api."+c+".tzkt.io/v1/tokens?"+r);if(e.ok)return await e.json();console.log("ERROR "+a()+"(): can't get tokens")}catch(e){console.log("ERROR "+a()+"(): "+e+JSON.stringify(e))}}(0,b);document.getElementById("dMoreActiveLoader").classList.add("is-hidden");for(let i of r){t++;let r=i.token?i.token:i,n=await k(r);e.append(n)}let i=document.getElementById("dMoreActiveTokens");t<20?i.classList.add("is-hidden"):i.classList.remove("is-hidden"),document.getElementById("btnMoreActiveTokens").classList.remove("is-loading"),0===(b+=t)&&(e.textContent="There are no tokens yet.")}bulmaToast.setDefaults({duration:5e3,position:"bottom-left",animate:{in:"zoomIn",out:"zoomOut"}}),document.addEventListener("DOMContentLoaded",(async function(){document.getElementById("appTitle").prepend(document.createTextNode(u)),m&&(document.getElementById("btnMenuConfig").classList.add("is-hidden"),document.getElementById("titleNetwork").innerHTML="&nbsp;"+("mainnet"===c?"mainnet":"testnet"),document.getElementById("titleNetwork").classList.remove("is-hidden")),"mainnet"===c?(document.getElementById("iconMainnetNotActive").classList.add("is-hidden"),document.getElementById("iconMainnetActive").classList.remove("is-hidden"),document.getElementById("iconTestnetActive").classList.add("is-hidden"),document.getElementById("iconTestnetNotActive").classList.remove("is-hidden")):(document.getElementById("titleNetwork").innerHTML="&nbsp;testnet",document.getElementById("titleNetwork").classList.remove("is-hidden"),document.getElementById("iconMainnetActive").classList.add("is-hidden"),document.getElementById("iconMainnetNotActive").classList.remove("is-hidden"),document.getElementById("iconTestnetNotActive").classList.add("is-hidden"),document.getElementById("iconTestnetActive").classList.remove("is-hidden")),await C(!0);let e=new URLSearchParams(window.location.search).get("cmd");"info"===e?await(document.getElementById("btnBurger").classList.remove("is-active"),document.getElementById("navbarMenu").classList.remove("is-active"),j(),void document.getElementById("pageInfo").classList.remove("is-hidden")):"tokens"===e?await async function(){j(),document.getElementById("dTokens").innerHTML="",document.getElementById("pageTokens").classList.remove("is-hidden");let e=new URLSearchParams(window.location.search).get("cid");e&&(R=e),await L()}():"token"===e?await async function(){j();let e=document.getElementById("btnTokenBuy"),t=document.getElementById("btnTokenList");t.classList.add("is-hidden");let n=document.getElementById("btnTokenBurn");n.classList.add("is-hidden");let a=document.getElementById("btnTokenTransfer");a.classList.add("is-hidden"),document.getElementById("dToken").classList.add("is-hidden"),document.getElementById("pageToken").classList.remove("is-hidden");let s=new URL(window.location),o=new URLSearchParams(window.location.search),m=o.get("cid");m?R=m:m=R;let c=o.get("tid");c?U=c:c=U;let l,d=document.getElementById("pageToken"),p=await h(R,c);if(p){let o;N=p,p.account===y&&p.balance>0&&(t.classList.remove("is-hidden"),n.classList.remove("is-hidden"),a.classList.remove("is-hidden")),new Promise((t=>{setTimeout((()=>{t(Promise.all([T(p.token.contract.address,p.token.tokenId),e]))}),10)})).then((e=>{e[0]&&(e[1].append(document.createTextNode((parseFloat(e[0].value.price)/1e6).toFixed(2)+" ꜩ")),e[1].addEventListener("click",(()=>D(e[0].key,e[0].value.price))),e[1].removeAttribute("disabled"))})),l=p.token.metadata?.name,d.querySelector(".js-name").innerText=l||"",l=p.token.metadata?.description,d.querySelector(".js-description").innerText=l||"";let m=d.querySelector(".js-creators"),c=d.querySelector(".js-creator");l=p.token.metadata?.creators;try{l=JSON.parse(l);for(let e=0;e<l.length;e++){let t=l[e];o=c.cloneNode(!0),o.setAttribute("href",s.pathname+"?cmd=tokens&creator="+t),o.append(document.createTextNode(r(t))),o.classList.remove("is-hidden"),m.append(o),m.append(document.createElement("br"))}}catch(e){d.querySelector(".js-creators").innerText=""}l=y&&y===p.account?p.balance:"",d.querySelector(".js-balance").innerText=l||"",l=p.token.totalSupply,d.querySelector(".js-editions").innerText=l||"",l=p.firstTime,d.querySelector(".js-firsttime").innerText=l?new Date(Date.parse(l)).toLocaleString():"";let g=p.token.contract.address;o=d.querySelector(".js-contract"),o.setAttribute("href",s.pathname+"?cmd=tokens&cid="+g),o.append(document.createTextNode(r(g))),d.querySelector(".js-contract-copy").addEventListener("click",(()=>{g&&i(g)&&bulmaToast.toast(v)})),l=p.token.tokenId,d.querySelector(".js-tokenid").innerText=l||"";let u=d.querySelector(".tags"),E=u.querySelector(".tag");l=p.token.metadata?.tags;try{l=JSON.parse(l);for(let e=0;e<l.length;e++)o=E.cloneNode(!0),o.append(document.createTextNode(l[e])),o.setAttribute("href",s.pathname+"?cmd=tokens&tag="+l[e]),o.classList.remove("is-hidden"),u.append(o)}catch(e){u.innerText=""}let f=p.token.metadata?.mimeType;if(d.querySelector(".js-type").innerText=f||"",l=p.token.metadata?.artifactUri,l){try{new URL(l),l=l.replace("ipfs://","https://ipfs.io/ipfs/")}catch(e){}f&&f.startsWith("video")?(d.querySelector(".js-img").remove(),d.querySelector(".js-audio").remove(),d.querySelector(".js-svg").remove(),o=d.querySelector(".js-video"),o.setAttribute("src",l)):f&&f.startsWith("audio")?(d.querySelector(".js-img").remove(),d.querySelector(".js-video").remove(),d.querySelector(".js-svg").remove(),o=d.querySelector(".js-audio"),o.setAttribute("src",l)):f&&f.startsWith("image/svg+xml")?(d.querySelector(".js-img").remove(),d.querySelector(".js-video").remove(),d.querySelector(".js-audio").remove(),o=d.querySelector(".js-svg"),o.setAttribute("data",l)):(d.querySelector(".js-video").remove(),d.querySelector(".js-audio").remove(),d.querySelector(".js-svg").remove(),o=d.querySelector(".js-img"),o.setAttribute("src",l)),o.classList.remove("is-hidden")}document.getElementById("dToken").classList.remove("is-hidden")}}():"search"===e?await async function(){j(),document.getElementById("pageSearch").classList.remove("is-hidden")}():"collections"===e?await async function(){j(),document.getElementById("dCollections").innerHTML="",document.getElementById("pageCollections").classList.remove("is-hidden"),await S()}():"newtoken"===e?await async function(){if(j(),y?document.getElementById("btnNewTokenCreate").removeAttribute("disabled"):(document.getElementById("btnNewTokenCreate").setAttribute("disabled",""),bulmaToast.toast({message:"To create a new token you need to connect wallet.",type:"is-danger"})),document.getElementById("nftCreators").value=y,document.getElementById("pageNewToken").classList.remove("is-hidden"),y){const e=document.getElementById("nftCollection");let r=document.createElement("option");r.setAttribute("value",l),r.append(document.createTextNode("- ZeroTerminal collection -")),e.append(r),e.parentNode.classList.add("is-loading");let i=await f(y,15,P);if(i)for(let n of i){let i=await I(n.address);if(i)try{i=JSON.parse(t(i))}catch(e){continue}r=document.createElement("option"),r.setAttribute("value",n.address),r.append(document.createTextNode(i?.name)),e.append(r)}e.parentNode.classList.remove("is-loading")}}():"newcollection"===e?await async function(){j(),y?document.getElementById("btnNewCollectionCreate").removeAttribute("disabled"):(document.getElementById("btnNewCollectionCreate").setAttribute("disabled",""),bulmaToast.toast({message:"To create a new collection you need to connect wallet.",type:"is-danger"})),document.getElementById("cCreators").value=y,document.getElementById("pageNewCollection").classList.remove("is-hidden")}():"listings"===e?await async function(){j(),document.getElementById("dListings").innerHTML="",document.getElementById("pageListings").classList.remove("is-hidden"),await B()}():await async function(){j(),document.getElementById("dActiveTokens").innerHTML="",document.getElementById("pageActiveTokens").classList.remove("is-hidden"),await A()}()})),document.getElementById("dMoreActiveTokens").addEventListener("click",(()=>A())),document.getElementById("btnMoreCollections").addEventListener("click",(()=>S()));var P=0;async function S(){document.getElementById("btnMoreCollections").classList.add("is-loading");let e=document.getElementById("dCollections"),n=0,a=new URLSearchParams(window.location.search).get("creator"),s=await f(a,15,P);if(s)for(let a of s){n++;let s=await I(a.address);if(s)try{s=JSON.parse(t(s))}catch(e){continue}const o=document.getElementById("t-collection").content.cloneNode(!0);let m=s?.imageUri;if(m){try{new URL(m),m=m.replace("ipfs://","https://ipfs.io/ipfs/")}catch(e){}o.querySelector(".js-img").setAttribute("src",m)}o.querySelector(".js-name").innerText=s?.name,o.querySelector(".js-description").innerText=s?.description,o.querySelector(".js-address").prepend(document.createTextNode(r(a.address))),o.querySelector(".copy-item").addEventListener("click",(()=>{a.address&&i(a.address)&&bulmaToast.toast(v)})),o.querySelector(".js-count").innerText=a.tokensCount;let c=new URL(window.location);o.querySelectorAll(".js-collection-item").forEach((function(e){e.setAttribute("href",c.pathname+"?cmd=tokens&cid="+a.address)})),e.append(o)}let o=document.getElementById("dMoreCollections");n<15?o.classList.add("is-hidden"):o.classList.remove("is-hidden"),document.getElementById("btnMoreCollections").classList.remove("is-loading"),0===(P+=n)&&(e.textContent="There are no collections yet.")}document.getElementById("btnMoreTokens").addEventListener("click",(()=>L()));var b=0,R="";async function L(){document.getElementById("btnMoreTokens").classList.add("is-loading");let e,t=document.getElementById("dTokens"),r=0,i=new URLSearchParams(window.location.search);e=i.get("account")?await async function(e,t,r){let i="sort.desc=id&select=account.address%20as%20account,token,balance&balance.gt=0&token.standard=fa2"+(e?"&account="+e:"")+"&limit=20"+(r?"&offset="+r:"")+"&token.metadata.artifactUri.as=data:*";try{let e=await fetch("https://api."+c+".tzkt.io/v1/tokens/balances?"+i);if(e.ok)return await e.json();console.log("ERROR "+a()+"(): can't get tokens")}catch(e){console.log("ERROR "+a()+"(): "+e+JSON.stringify(e))}}(i.get("account"),0,b):await async function(e,t,r,i,n,s,o,m){let l="sort.desc=id&select=contract,tokenId,totalSupply,metadata&totalSupply.gt=0&limit=20"+(t?"&offset="+t:"")+(r?"&contract.in="+r:"")+(m?"&firstMinter="+m:"")+(i?"&metadata.name="+i:"")+"&metadata.artifactUri.as=data:"+(o||"")+"*";if(n&&n.length>0){n.sort(),l+="&metadata.creators.as=*";for(let e of n)l+='"'+e+'"*'}if(s&&s.length>0){s.sort(((e,t)=>e.localeCompare(t))),l+="&metadata.tags.as=*";for(let e of s)l+='"'+e+'"*'}try{let e=await fetch("https://api."+c+".tzkt.io/v1/tokens?"+l);if(e.ok)return await e.json();console.log("ERROR "+a()+"(): can't get tokens")}catch(e){console.log("ERROR "+a()+"(): "+e+JSON.stringify(e))}}(0,b,i.get("cid"),i.get("name"),i.getAll("creator"),i.getAll("tag"),i.get("type"),i.get("minter"));for(let i of e){r++;let e=i.token?i.token:i,n=await k(e);t.append(n)}let n=document.getElementById("dMoreTokens");r<20?n.classList.add("is-hidden"):n.classList.remove("is-hidden"),document.getElementById("btnMoreTokens").classList.remove("is-loading"),0===(b+=r)&&(t.textContent="There are no tokens yet.")}async function k(e){let t,i=new URL(window.location);const n=document.getElementById("t-token").content.cloneNode(!0);let a=n.querySelector(".js-price");new Promise((t=>{setTimeout((()=>{t(Promise.all([T(e.contract.address,e.tokenId),a]))}),100)})).then((e=>{e[0]&&(e[1].innerText=(parseFloat(e[0].value.price)/1e6).toFixed(2),e[1].parentNode.classList.remove("is-hidden"))}));let s=e.metadata?.name;t=n.querySelector(".js-name"),t.innerText=s||"";let o=n.querySelector(".js-creators"),m=n.querySelector(".js-creator");s=e.metadata?.creators;try{s=JSON.parse(s);for(let e=0;e<s.length;e++)t=m.cloneNode(!0),t.setAttribute("href",i.pathname+"?cmd=tokens&creator="+s[e]),t.append(document.createTextNode(r(s[e]))),e>0&&o.append(document.createTextNode(", ")),t.classList.remove("is-hidden"),o.append(t)}catch(e){n.querySelector(".js-creators").innerText=""}if(s=e.totalSupply,t=n.querySelector(".js-count"),t.innerText=s||"",s=e.metadata?.artifactUri,s){try{new URL(s),s=s.replace("ipfs://","https://ipfs.io/ipfs/")}catch(e){}let r=e.metadata?.mimeType;r&&r.startsWith("video")?(n.querySelector(".js-img").remove(),n.querySelector(".js-audio").remove(),n.querySelector(".js-svg").remove(),t=n.querySelector(".js-video"),t.setAttribute("src",s)):r&&r.startsWith("audio")?(n.querySelector(".js-img").remove(),n.querySelector(".js-video").remove(),n.querySelector(".js-svg").remove(),t=n.querySelector(".js-audio"),t.setAttribute("src",s)):r&&r.startsWith("image/svg+xml")?(n.querySelector(".js-img").remove(),n.querySelector(".js-video").remove(),n.querySelector(".js-audio").remove(),t=n.querySelector(".js-svg"),t.setAttribute("data",s)):(n.querySelector(".js-video").remove(),n.querySelector(".js-audio").remove(),n.querySelector(".js-svg").remove(),t=n.querySelector(".js-img"),t.setAttribute("src",s)),t.classList.remove("is-hidden")}return n.querySelectorAll(".js-token-item").forEach((function(t){t.setAttribute("href",i.pathname+"?cmd=token&cid="+e.contract.address+"&tid="+e.tokenId)})),n}async function B(){let e=document.getElementById("dListings"),t=new URLSearchParams(window.location.search),r=t.get("seller"),i=t.get("minprice"),n=t.get("maxprice"),s=t.get("cid"),o=t.get("tid");document.getElementById("btnMoreListings").classList.add("is-loading");let m=0,l=await async function(e,t,r,i,n,s,o){let m="sort.desc=id&active=true&select=key,value&limit=15"+(o?"&offset="+o:"")+(e?"&value.seller="+e:"")+(t?"&value.price.ge="+t:"")+(r?"&value.price.le="+r:"")+(i?"&value.token.address="+i:"")+(n?"&value.token.id="+n:"");try{let e=await fetch("https://api."+c+".tzkt.io/v1/contracts/"+d+"/bigmaps/offers/keys?"+m);if(e.ok)return await e.json();console.log("ERROR "+a()+"(): can't get offers")}catch(e){console.log("ERROR "+a()+"(): "+e+JSON.stringify(e))}}(r,i,n,s,o,0,b);for(let t of l){m++;let r=await w(t);e.append(r)}let p=document.getElementById("dMoreListings");m<15?p.classList.add("is-hidden"):p.classList.remove("is-hidden"),document.getElementById("btnMoreListings").classList.remove("is-loading"),0===(b+=m)&&(e.textContent="There are no listings matching these criteria.")}async function w(e){let t,i=new URL(window.location);const n=document.getElementById("t-listing").content.cloneNode(!0);let s=(await h(e.value.token.address,e.value.token.id)).token,o=s.metadata?.name;t=n.querySelector(".js-name"),t.innerText=o||"";let m=n.querySelector(".js-creators"),c=n.querySelector(".js-creator");o=s.metadata?.creators;try{o=JSON.parse(o);for(let e=0;e<o.length;e++)t=c.cloneNode(!0),t.setAttribute("href",i.pathname+"?cmd=tokens&creator="+o[e]),t.append(document.createTextNode(r(o[e]))),e>0&&m.append(document.createTextNode(", ")),t.classList.remove("is-hidden"),m.append(t)}catch(e){n.querySelector(".js-creators").innerText=""}if(o=new Date(Date.parse(e.value.time_start)).toLocaleString(),t=n.querySelector(".js-start-time"),t.innerText=o||"",o=e.value.time_expiry?new Date(Date.parse(e.value.time_expiry))?.toLocaleString():"...",t=n.querySelector(".js-expiry-time"),t.innerText=o||"",o=e.value.amount,t=n.querySelector(".js-amount"),t.innerText=o||"",o=(parseFloat(e.value.price)/1e6).toFixed(2),t=n.querySelector(".js-price"),t.innerText=o||"",o=s.metadata?.artifactUri,o){try{new URL(o),o=o.replace("ipfs://","https://ipfs.io/ipfs/")}catch(e){}let e=s.metadata?.mimeType;e&&e.startsWith("video")?(n.querySelector(".js-img").remove(),n.querySelector(".js-audio").remove(),n.querySelector(".js-svg").remove(),t=n.querySelector(".js-video"),t.setAttribute("src",o)):e&&e.startsWith("audio")?(n.querySelector(".js-img").remove(),n.querySelector(".js-video").remove(),n.querySelector(".js-svg").remove(),t=n.querySelector(".js-audio"),t.setAttribute("src",o)):e&&e.startsWith("image/svg+xml")?(n.querySelector(".js-img").remove(),n.querySelector(".js-video").remove(),n.querySelector(".js-audio").remove(),t=n.querySelector(".js-svg"),t.setAttribute("data",o)):(n.querySelector(".js-video").remove(),n.querySelector(".js-audio").remove(),n.querySelector(".js-svg").remove(),t=n.querySelector(".js-img"),t.setAttribute("src",o)),t.classList.remove("is-hidden")}let l=n.querySelector(".js-btn-buy"),p=n.querySelector(".js-btn-cancel-offer");return e.value.seller===y?(l.classList.add("is-hidden"),p.classList.remove("is-hidden"),p.addEventListener("click",(()=>async function(e){let t=event.currentTarget;t.classList.add("is-loading");let r=event.target.closest(".js-listing"),i=await async function(e){try{let t=await E.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.TRANSACTION,amount:0,destination:d,parameters:{entrypoint:"cancel_offer",value:JSON.parse('{ "int": "'+e+'" }')}}]});if(t.transactionHash)return t.transactionHash}catch(e){console.log("ERROR "+a()+"(): "+e+" "+JSON.stringify(e))}}(e);i&&(M(i),r.remove()),t.classList.remove("is-loading")}(e.key)))):(p.classList.add("is-hidden"),l.classList.remove("is-hidden"),l.addEventListener("click",(()=>D(e.key,e.value.price)))),n.querySelectorAll(".js-token-item").forEach((function(e){e.setAttribute("href",i.pathname+"?cmd=token&cid="+s.contract.address+"&tid="+s.tokenId)})),n}document.getElementById("btnMoreListings").addEventListener("click",(()=>B())),document.getElementById("btnSearch").addEventListener("click",(()=>async function(){let e="";if(document.getElementById("searchListTab").classList.contains("is-active")){let t,r,i=document.getElementById("searchListMinPrice").value;if(i){if(i=Math.round(parseFloat(i)*10**6),Number.isNaN(i)||i<=0)return void bulmaToast.toast({message:"Invalid min price.",type:"is-danger"});t=i,e+="&minprice="+i}if(i=document.getElementById("searchListMaxPrice").value,i){if(i=Math.round(parseFloat(i)*10**6),Number.isNaN(i)||i<=0)return void bulmaToast.toast({message:"Invalid max price.",type:"is-danger"});r=i,e+="&maxprice="+i}if(t&&r&&t>r)return void bulmaToast.toast({message:"Invalid price range.",type:"is-danger"});if(i=document.getElementById("searchListAddress").value.trim(),i){if(!n(i))return void bulmaToast.toast({message:"Invalid token or collection address.",type:"is-danger"});e+="&cid="+i}if(i=document.getElementById("searchListSeller").value.trim(),i){if(!n(i))return void bulmaToast.toast({message:"Invalid seller address.",type:"is-danger"});e+="&seller="+i}window.location.search="cmd=listings"+e}else if(document.getElementById("searchColTab").classList.contains("is-active")){let t=document.getElementById("searchColCreator").value.trim();if(t){if(!n(t))return void bulmaToast.toast({message:"Invalid creator address.",type:"is-danger"});e+="&creator="+t}window.location.search="cmd=collections"+e}else if(document.getElementById("searchTokTab").classList.contains("is-active")){let t=document.getElementById("searchTokName").value.trim();if(t){if(t.length>200)return void bulmaToast.toast({message:"The name length must be less than 200 characters.",type:"is-danger"});e+="&name="+t}t=document.getElementById("searchTokCreators").value.trim().split(/\s*,\s*/).filter((e=>e.length>0));for(let r of t){if(!n(r))return void bulmaToast.toast({message:"Invalid creator address: "+r,type:"is-danger"});e+="&creator="+r.trim()}t=document.getElementById("searchTokTags").value.trim().split(/\s*,\s*/).filter((e=>e.length>0));for(let r of t){if(r.length<3)return void bulmaToast.toast({message:"The tag length must be more than 2 characters.",type:"is-danger"});e+="&tag="+r.trim()}if(t=document.getElementById("searchTokType").value.trim(),t&&(e+="&type="+t),t=document.getElementById("searchTokMinter").value.trim(),t){if(!n(t))return void bulmaToast.toast({message:"Invalid minter address.",type:"is-danger"});e+="&minter="+t}window.location.search="cmd=tokens"+e}}())),document.getElementById("btnNewCollectionCreate").addEventListener("click",(()=>async function(){let t,r=new Map;if(t=document.getElementById("cName").value.trim(),!t)return void bulmaToast.toast({message:"The collection name must not be empty.",type:"is-danger"});if(t.length>200)return void bulmaToast.toast({message:"The name length must be less than 200 characters.",type:"is-danger"});if(r.set("name",t),t=document.getElementById("cDescription").value.trim(),t){if(t.length>2e3)return void bulmaToast.toast({message:"The description length must be less than 2000 characters.",type:"is-danger"});r.set("description",t)}if(t=document.getElementById("cSymbol").value.trim(),t&&r.set("symbol",t),t=document.getElementById("cType").value.trim(),t&&r.set("type",t),t=document.getElementById("cInterfaces").value.split(/\s*,\s*/).filter((e=>e.length>0)),t.length>0&&r.set("interfaces",t),t=document.getElementById("cAuthors").value.split(/\s*,\s*/).filter((e=>e.length>0)),t.length>0&&r.set("authors",t),t=document.getElementById("cAddresses").value.split(/\s*,\s*/).filter((e=>e.length>0)),t.length>0){for(let e of t)if(!n(e))return void bulmaToast.toast({message:"Invalid author address: "+e,type:"is-danger"});t.sort(),r.set("authoraddress",t)}if(t=document.getElementById("cCreators").value.split(/\s*,\s*/).filter((e=>e.length>0)),t.length>0){for(let e of t)if(!n(e))return void bulmaToast.toast({message:"Invalid creator address: "+e,type:"is-danger"});t.sort(),r.set("creators",t)}const i=document.getElementById("cFile").files;i.length>0&&(t=await new Promise((e=>{let t=new FileReader;t.onload=r=>e(t.result),t.readAsDataURL(i[0])})),r.set("imageUri",t)),document.getElementById("btnNewCollectionCreate").classList.add("is-loading");let s=await async function(t){let r=t.size>0?e(JSON.stringify(Object.fromEntries(t))):"";try{let e;if(g)e=g;else{let t=await fetch("./user_collection.json");t.ok&&(e=await t.text())}if(e){e=e.replaceAll("${user_address}",y),e=e.replaceAll("${metadata_content}",r);const t=await E.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.ORIGINATION,balance:"0",script:JSON.parse(e)}]});if(t.transactionHash)return t.transactionHash}else console.log("ERROR "+a()+"(): can't create collection")}catch(e){console.log("ERROR "+a()+"(): "+e+JSON.stringify(e))}}(r);s&&M(s),document.getElementById("btnNewCollectionCreate").classList.remove("is-loading")}())),document.getElementById("cFile").addEventListener("change",(()=>function(){const e=document.getElementById("cFile"),t=document.getElementById("cFileImage"),r=document.getElementById("cFileSizeIcon");if(r.classList.add("is-hidden"),e.files.length>0){let i=e.files[0];document.getElementById("cFileName").innerHTML=i.name;let n="0 Bytes";if(i.size>0){let e=["Bytes","KB","MB","GB","TB"],t=Math.floor(Math.log(i.size)/Math.log(1024));n=parseFloat((i.size/Math.pow(1024,t)).toFixed(2))+" "+e[t],i.size>10240&&(r.classList.remove("is-hidden"),r.classList.remove("has-text-danger"),r.classList.add("has-text-warning"),i.size>15360?(r.classList.remove("has-text-warning"),r.classList.add("has-text-danger"),bulmaToast.toast({message:"This file is big. Try to make it smaller.",type:"is-danger"})):bulmaToast.toast({message:"Likely this file is big. Try to make it smaller.",type:"is-warning"}))}document.getElementById("cFileSize").innerHTML=n;let a=new FileReader;a.readAsDataURL(i),a.onload=e=>{t.setAttribute("src",e.target.result)}}else document.getElementById("cFileSize").innerHTML="&nbsp;",document.getElementById("cFileName").innerHTML="Choose a file ...",t.setAttribute("src","")}())),document.getElementById("cFileRemove").addEventListener("click",(()=>(document.getElementById("cFile").value="",document.getElementById("cFileSizeIcon").classList.add("is-hidden"),document.getElementById("cFileSize").innerHTML="&nbsp;",document.getElementById("cFileName").innerHTML="Choose a file ...",void document.getElementById("cFileImage").setAttribute("src","")))),document.getElementById("btnNewTokenCreate").addEventListener("click",(()=>async function(){let t,r=new Map,i=document.getElementById("nftCollection").value;if(!i)return void bulmaToast.toast({message:"Collection must be selected.",type:"is-danger"});if(t=document.getElementById("nftName").value.trim(),t){if(t.length>200)return void bulmaToast.toast({message:"The name length must be less than 200 characters.",type:"is-danger"});r.set("name",t)}if(t=document.getElementById("nftDescription").value.trim(),t){if(t.length>200)return void bulmaToast.toast({message:"The description length must be less than 2000 characters.",type:"is-danger"});r.set("description",t)}if(t=document.getElementById("nftTags").value.trim().split(/\s*,\s*/).filter((e=>e.length>0)),t.length>0){for(let e of t)if(e.length<3)return void bulmaToast.toast({message:"The tag length must be more than 2 characters.",type:"is-danger"});t.sort(((e,t)=>e.localeCompare(t))),r.set("tags",t)}if(t=document.getElementById("nftCreators").value.trim().split(/\s*,\s*/).filter((e=>e.length>0)),t.length>0){for(let e of t)if(!n(e))return void bulmaToast.toast({message:"Invalid creator address: "+e,type:"is-danger"});t.sort(),r.set("creators",t)}t=document.getElementById("nftType").value.trim(),t&&r.set("mimeType",t),t=document.getElementById("nftRights").value.trim(),t&&r.set("rights",t),t=document.getElementById("nftDecimals").value.trim(),t&&r.set("decimals",t);let s=new Map,o=0,m=document.getElementById("pageNewToken").querySelectorAll(".js-royalties-line-data");for(let e of m){let t=e.querySelector(".js-royalties-data-address").value.trim();if(0===t.length)return void bulmaToast.toast({message:"The royalty address must not be empty.",type:"is-danger"});if(!n(t))return void bulmaToast.toast({message:"Invalid royalty address: "+t,type:"is-danger"});if(s.has(t))return void bulmaToast.toast({message:"The royalty addresses must be different.",type:"is-danger"});let r=e.querySelector(".js-royalties-data-value").value;try{r=Math.round(100*parseFloat(r))}catch(e){return void bulmaToast.toast({message:"The royalty value must be a number.",type:"is-danger"})}if(r<=0)return void bulmaToast.toast({message:"The royalty value must be greater than zero.",type:"is-danger"});if(o+=r,o>2500)return void bulmaToast.toast({message:"The maximum amount of the total royalty shall not exceed 25%.",type:"is-danger"});s.set(t,r)}s.size>0&&(t='{"decimals":4,"shares":'+JSON.stringify(Object.fromEntries(s))+"}",r.set("royalties",t));const l=document.getElementById("nftFile").files;if(!(l.length>0))return void bulmaToast.toast({message:"Media file must be selected.",type:"is-danger"});t=await new Promise((e=>{let t=new FileReader;t.onload=r=>e(t.result),t.readAsDataURL(l[0])})),r.set("artifactUri",t);let d=new Map,p=document.getElementById("pageNewToken").querySelectorAll(".js-attributes-line-data");for(let e of p){let t=e.querySelector(".js-attributes-data-name").value.trim();if(0===t.length)return void bulmaToast.toast({message:"The attribute name must not be empty.",type:"is-danger"});if(d.has(t))return void bulmaToast.toast({message:"The attribute names must be different.",type:"is-danger"});let r=e.querySelector(".js-attributes-data-value").value;d.set(t,r)}if(d.size>0){let e="[",t=!0;for(let[r,i]of d)t?t=!1:e+=",",e+='{"name":"'+r+'","value":"'+i+'"}';e+="]",r.set("attributes",e)}let g=document.getElementById("nftEditions").value;document.getElementById("btnNewTokenCreate").classList.add("is-loading");let u=await async function(t,r,i){let n="";if((i=new Map([...i].sort())).size>0){let t=!0;for(let[r,a]of i)t?t=!1:n+=",",n+='{"prim":"Elt","args":[{"string":"'+r+'"},{"bytes":"'+e("string"==typeof a||a instanceof String?a:JSON.stringify(a))+'"}]}'}let s='{"string":"'+y+'"}',o='{"int":"'+r+'"}',m="["+n+"]",l=[];try{let e='{"prim":"Pair","args":[${0},{"prim":"Pair","args":[${1},${2}]}]}';try{let r=await fetch("https://api."+c+".tzkt.io/v1/contracts/"+t+"/entrypoints/mint"),i=await r.json();2===Object.keys(i.jsonParameters["schema:object"]).length&&(e='{"prim":"Pair","args":[${0},${1}]}');for(let e of Object.keys(i.jsonParameters["schema:object"]))e.endsWith(":address")?l.push(s):e.endsWith(":nat")?l.push(o):e.endsWith(":map_flat:string:bytes")&&l.push(m)}catch(e){console.log("ERROR "+a()+"(): "+e+" "+JSON.stringify(e))}for(let t=0;t<l.length;t++)e=e.replace("${"+t+"}",l[t]);let r=await E.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.TRANSACTION,amount:0,destination:t,parameters:{entrypoint:"mint",value:JSON.parse(e)}}]});if(r.transactionHash)return r.transactionHash}catch(e){console.log("ERROR "+a()+"(): "+e+" "+JSON.stringify(e))}}(i,g,r);u&&M(u),document.getElementById("btnNewTokenCreate").classList.remove("is-loading")}())),document.getElementById("nftFile").addEventListener("change",(()=>function(){const e=document.getElementById("nftFile"),t=document.getElementById("nftFileImage"),r=document.getElementById("nftType"),i=document.getElementById("nftFileSizeIcon");if(i.classList.add("is-hidden"),e.files.length>0){let n=e.files[0];document.getElementById("nftFileName").innerHTML=n.name,r.value=n.type;let a="0 Bytes";if(n.size>0){let e=["Bytes","KB","MB","GB","TB"],t=Math.floor(Math.log(n.size)/Math.log(1024));a=parseFloat((n.size/Math.pow(1024,t)).toFixed(2))+" "+e[t],n.size>20480&&(i.classList.remove("is-hidden"),i.classList.remove("has-text-danger"),i.classList.add("has-text-warning"),n.size>28672?(i.classList.remove("has-text-warning"),i.classList.add("has-text-danger"),bulmaToast.toast({message:"This file is big. Try to make it smaller.",type:"is-danger"})):bulmaToast.toast({message:"Likely this file is big. Try to make it smaller.",type:"is-warning"}))}document.getElementById("nftFileSize").innerHTML=a;let s=new FileReader;s.onload=e=>{t.setAttribute("src",e.target.result)},s.readAsDataURL(n)}else r.value="",document.getElementById("nftFileSize").innerHTML="&nbsp;",document.getElementById("nftFileName").innerHTML="Choose a file ...",t.setAttribute("src","")}())),document.getElementById("nftFileRemove").addEventListener("click",(()=>(document.getElementById("nftFile").value="",document.getElementById("nftType").value="",document.getElementById("nftFileSizeIcon").classList.add("is-hidden"),document.getElementById("nftFileSize").innerHTML="&nbsp;",document.getElementById("nftFileName").innerHTML="Choose a file ...",void document.getElementById("nftFileImage").setAttribute("src","")))),document.getElementById("btnTokenList").addEventListener("click",(()=>async function(){N&&document.getElementById("mListTokenAmount").setAttribute("max",N.balance),document.getElementById("mListToken").classList.add("is-active")}())),document.getElementById("btnListTokenList").addEventListener("click",(()=>async function(){if(!N)return void bulmaToast.toast({message:"The token is not found.",type:"is-danger"});let e=Math.round(parseFloat(document.getElementById("mListTokenPrice").value)*10**6);if(Number.isNaN(e)||e<=0)return void bulmaToast.toast({message:"Invalid price.",type:"is-danger"});let t,r=N.token.contract.address,i=N.token.tokenId,n=document.getElementById("mListTokenAmount").value;try{let e=JSON.parse(N.token.metadata.royalties);t=new Map(Object.entries(e.shares));let r=e.decimals;for(let[e,i]of t)t.set(e,Math.trunc(Number(i)/10**r*1e4))}catch(e){t=new Map}let s=document.getElementById("mListTokenStartTiime").value;s=Math.trunc(Date.parse(s)/1e3),s||(s=Math.trunc(Date.now()/1e3));document.getElementById("btnListTokenList").classList.add("is-loading");let o=await async function(e,t,r,i,n,s,o){let m="";if(n&&n.size>0){n=new Map([...n].sort());let e=0;for(let[t,r]of n)e>0&&(m+=","),e++,m+='{"prim":"Elt","args":[{"string":"'+t+'"},{"int":"'+r+'"}]}'}o=o?'"prim":"Some","args":[{"int":"'+o+'"}]':'"prim":"None"';try{let n=await E.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.TRANSACTION,amount:0,destination:t,parameters:{entrypoint:"update_operators",value:JSON.parse('[ { "prim": "Left", "args": [ { "prim": "Pair", "args": [ { "string": "'+y+'" }, { "prim": "Pair", "args": [ { "string": "'+d+'" }, { "int": "'+r+'" } ] } ] } ] } ]')}},{kind:beacon.TezosOperationType.TRANSACTION,amount:0,destination:d,parameters:{entrypoint:"add_offer",value:JSON.parse('{"prim":"Pair","args":[{"prim":"Pair","args":[{"int":"'+i+'"},{"prim":"Pair","args":[{"int":"'+e+'"},['+m+']]}]},{"prim":"Pair","args":[{'+o+'},{"prim":"Pair","args":[{"int":"'+s+'"},{"prim":"Pair","args":[{"string":"'+t+'"},{"int":"'+r+'"}]}]}]}]}')}}]});if(n.transactionHash)return n.transactionHash}catch(e){console.log("ERROR "+a()+"(): "+e+" "+JSON.stringify(e))}}(e,r,i,n,t,s,"");o&&(M(o),document.getElementById("mListToken").classList.remove("is-active")),document.getElementById("btnListTokenList").classList.remove("is-loading")}())),document.getElementById("btnTokenBurn").addEventListener("click",(()=>async function(){N&&document.getElementById("mBurnTokenAmount").setAttribute("max",N.balance),document.getElementById("mBurnToken").classList.add("is-active")}())),document.getElementById("btnBurnTokenBurn").addEventListener("click",(()=>async function(){document.getElementById("btnBurnTokenBurn").classList.add("is-loading");let e=document.getElementById("mBurnTokenAmount").value,t=await async function(e,t,r){try{let i='{"prim":"Pair","args":[{"int":"'+r+'"},{"int":"'+t+'"}]}';try{let r=await fetch("https://api."+c+".tzkt.io/v1/contracts/"+e+"/entrypoints/burn?json=false&michelson=true");(await r.json()).michelsonParameters.startsWith("pair")||(i='{"int":"'+t+'"}')}catch(e){}let n=await E.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.TRANSACTION,amount:0,destination:e,parameters:{entrypoint:"burn",value:JSON.parse(i)}}]});if(n.transactionHash)return n.transactionHash}catch(e){console.log("ERROR "+a()+"(): "+e+" "+JSON.stringify(e))}}(R,U,e);t&&(M(t),window.history.back()),document.getElementById("btnBurnTokenBurn").classList.remove("is-loading")}())),document.getElementById("btnTokenTransfer").addEventListener("click",(()=>async function(){N&&document.getElementById("mTransferTokenAmount").setAttribute("max",N.balance),document.getElementById("mTransferTokenAddressTo").value="",document.getElementById("mTransferToken").classList.add("is-active")}())),document.getElementById("btnTransferTokenTransfer").addEventListener("click",(()=>async function(){let e=document.getElementById("mTransferTokenAmount").value,t=document.getElementById("mTransferTokenAddressTo").value.trim();if(!n(t))return void bulmaToast.toast({message:"Invalid destination address.",type:"is-danger"});document.getElementById("btnTransferTokenTransfer").classList.add("is-loading");let r=await async function(e,t,r,i){try{let n=await E.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.TRANSACTION,amount:0,destination:e,parameters:{entrypoint:"transfer",value:JSON.parse('[{"prim": "Pair","args":[{"string":"'+y+'"},[{"prim": "Pair","args":[{"string":"'+i+'"},{"prim": "Pair","args":[{"int":"'+t+'"},{"int":"'+r+'"}]}]}]]}]')}}]});if(n.transactionHash)return n.transactionHash}catch(e){console.log("ERROR "+a()+"(): "+e+" "+JSON.stringify(e))}}(R,U,e,t);r&&(M(r),document.getElementById("mTransferToken").classList.remove("is-active")),document.getElementById("btnTransferTokenTransfer").classList.remove("is-loading")}()));var N,U="";async function D(e,t){let r=event.currentTarget;r.classList.add("is-loading");let i=await async function(e,t,r){try{let t=await E.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.TRANSACTION,amount:1*r,destination:d,parameters:{entrypoint:"accept_offer",value:JSON.parse('{"prim":"Pair","args":[{"int":"1"},{"int":"'+e+'"}]}')}}]});if(t.transactionHash)return t.transactionHash}catch(e){console.log("ERROR "+a()+"(): "+e+" "+JSON.stringify(e))}}(e,0,t);i&&M(i),r.classList.remove("is-loading")}function O(){let e=event.currentTarget.querySelector(".fas");event.currentTarget.parentElement.querySelector(".is-collapsible").classList.toggle("is-active"),e.classList.toggle("fa-angle-down"),e.classList.toggle("fa-angle-up")}async function C(e){let t=y;await async function(e){let t=await E.getActiveAccount();if(t)y=t.address;else if(!e){let e=await E.requestPermissions({network:{type:c}});y=e.address}}(e),y&&(document.getElementById("divConnect").classList.add("is-hidden"),document.getElementById("aAddress").innerHTML=r(y),document.getElementById("divDisconnect").classList.remove("is-hidden")),e||t===y||window.location.reload()}function j(){document.querySelectorAll(".js-page").forEach((function(e){e.classList.add("is-hidden")}))}function M(e){bulmaToast.toast({message:"Your request is processing with ID <a href='https://"+c+".tzkt.io/"+e+"' target='_blank'>"+r(e)+"</a>",duration:5e3,type:"is-success"})}document.querySelectorAll(".js-faq-item").forEach((function(e){e.onclick=O})),document.getElementById("btnConnect").addEventListener("click",(()=>C(!1))),document.getElementById("btnDisconnect").addEventListener("click",(()=>async function(){await async function(){await E.clearActiveAccount(),y=""}(),y||(document.getElementById("divDisconnect").classList.add("is-hidden"),document.getElementById("aAddress").innerHTML="",document.getElementById("divConnect").classList.remove("is-hidden")),window.location.reload()}())),document.getElementById("btnMenuTokens").addEventListener("click",(()=>{window.location.search="cmd=tokens"})),document.getElementById("btnMenuCollections").addEventListener("click",(()=>{window.location.search="cmd=collections"})),document.getElementById("btnMenuListings").addEventListener("click",(()=>{window.location.search="cmd=listings"})),document.getElementById("btnMenuSearch").addEventListener("click",(()=>{window.location.search="cmd=search"})),document.getElementById("btnMenuNewToken").addEventListener("click",(()=>{window.location.search="cmd=newtoken"})),document.getElementById("btnMenuNewCollection").addEventListener("click",(()=>{window.location.search="cmd=newcollection"})),document.getElementById("btnMenuInfo").addEventListener("click",(()=>{window.location.search="cmd=info"})),document.getElementById("btnMenuCopyAddress").addEventListener("click",(()=>{y&&i(y)&&bulmaToast.toast(v)})),document.getElementById("btnMenuMyCollections").addEventListener("click",(()=>{window.location.search="cmd=collections&creator="+y})),document.getElementById("btnMenuMyTokens").addEventListener("click",(()=>{window.location.search="cmd=tokens&account="+y})),document.getElementById("btnMenuMyListings").addEventListener("click",(()=>{window.location.search="cmd=listings&seller="+y})),LT={}})();