var LT;(()=>{"use strict";function e(e){return Array.from((new TextEncoder).encode(e),(e=>e.toString(16).padStart(2,"0"))).join("")}function t(e){const t=new Uint8Array(e.length/2);for(let r=0;r!==t.length;r++)t[r]=parseInt(e.substr(2*r,2),16);return(new TextDecoder).decode(t)}function r(e){return e&&e.length>14?e.substring(0,5)+"..."+e.substring(e.length-5):e}function i(e){if(navigator.clipboard)return navigator.clipboard.writeText(e).then((function(){}),(function(e){return!1})),!0;let t=!1;var r=document.createElement("textarea");r.value=e,r.style.top="0",r.style.left="0",r.style.position="fixed",document.body.appendChild(r),r.focus(),r.select();try{document.execCommand("copy"),t=!0}catch(e){}return document.body.removeChild(r),t}function s(e){return/^(tz|KT)[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{34}$/.test(String(e))}function n(){try{return(new Error).stack.split("\n")[2].replace(/^\s+at\s+(.+?)\s.+/g,"$1")}catch(e){return""}}const a=window.location,o=(a.host+a.pathname).indexOf("testnet")>=0||(a.host+a.pathname).indexOf("ghostnet")>=0,m=!a.protocol.startsWith("http"),c=o?"ghostnet":"mainnet",d=o?"KT1VCnPM6SKpvza6TLkbNcoxAgS6B61JLGtE":"KT1ULc5LQazQorDUjacBieq5puEGFQZ6jorT",l=o?"KT1TRuN4Uc4ai6ZjWRjtedX9ChmfcfvxfBXt":"KT1KyPvhak54X3yiozebqhPhnqrtWNTiaWm1",p="-1835576114,-1513923773,-1889653220,-543526052",g='{"code":[{"prim":"storage","args":[{"prim":"pair","args":[{"prim":"pair","args":[{"prim":"address","annots":["%administrator"]},{"prim":"pair","args":[{"prim":"nat","annots":["%all_tokens"]},{"prim":"big_map","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]},{"prim":"nat"}],"annots":["%ledger"]}]}]},{"prim":"pair","args":[{"prim":"pair","args":[{"prim":"big_map","args":[{"prim":"string"},{"prim":"bytes"}],"annots":["%metadata"]},{"prim":"big_map","args":[{"prim":"pair","args":[{"prim":"address","annots":["%owner"]},{"prim":"pair","args":[{"prim":"address","annots":["%operator"]},{"prim":"nat","annots":["%token_id"]}]}]},{"prim":"unit"}],"annots":["%operators"]}]},{"prim":"pair","args":[{"prim":"big_map","args":[{"prim":"nat"},{"prim":"pair","args":[{"prim":"nat","annots":["%token_id"]},{"prim":"map","args":[{"prim":"string"},{"prim":"bytes"}],"annots":["%token_info"]}]}],"annots":["%token_metadata"]},{"prim":"big_map","args":[{"prim":"nat"},{"prim":"nat"}],"annots":["%total_supply"]}]}]}]}]},{"prim":"parameter","args":[{"prim":"or","args":[{"prim":"or","args":[{"prim":"pair","args":[{"prim":"list","args":[{"prim":"pair","args":[{"prim":"address","annots":["%owner"]},{"prim":"nat","annots":["%token_id"]}]}],"annots":["%requests"]},{"prim":"contract","args":[{"prim":"list","args":[{"prim":"pair","args":[{"prim":"pair","args":[{"prim":"address","annots":["%owner"]},{"prim":"nat","annots":["%token_id"]}],"annots":["%request"]},{"prim":"nat","annots":["%balance"]}]}]}],"annots":["%callback"]}],"annots":["%balance_of"]},{"prim":"pair","args":[{"prim":"nat","annots":["%amount"]},{"prim":"nat","annots":["%token_id"]}],"annots":["%burn"]}]},{"prim":"or","args":[{"prim":"pair","args":[{"prim":"address","annots":["%address"]},{"prim":"pair","args":[{"prim":"nat","annots":["%amount"]},{"prim":"map","args":[{"prim":"string"},{"prim":"bytes"}],"annots":["%metadata"]}]}],"annots":["%mint"]},{"prim":"or","args":[{"prim":"list","args":[{"prim":"pair","args":[{"prim":"address","annots":["%from_"]},{"prim":"list","args":[{"prim":"pair","args":[{"prim":"address","annots":["%to_"]},{"prim":"pair","args":[{"prim":"nat","annots":["%token_id"]},{"prim":"nat","annots":["%amount"]}]}]}],"annots":["%txs"]}]}],"annots":["%transfer"]},{"prim":"list","args":[{"prim":"or","args":[{"prim":"pair","args":[{"prim":"address","annots":["%owner"]},{"prim":"pair","args":[{"prim":"address","annots":["%operator"]},{"prim":"nat","annots":["%token_id"]}]}],"annots":["%add_operator"]},{"prim":"pair","args":[{"prim":"address","annots":["%owner"]},{"prim":"pair","args":[{"prim":"address","annots":["%operator"]},{"prim":"nat","annots":["%token_id"]}]}],"annots":["%remove_operator"]}]}],"annots":["%update_operators"]}]}]}]}]},{"prim":"code","args":[[{"prim":"CAST","args":[{"prim":"pair","args":[{"prim":"or","args":[{"prim":"or","args":[{"prim":"pair","args":[{"prim":"list","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]}]},{"prim":"contract","args":[{"prim":"list","args":[{"prim":"pair","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]},{"prim":"nat"}]}]}]}]},{"prim":"pair","args":[{"prim":"nat"},{"prim":"nat"}]}]},{"prim":"or","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"pair","args":[{"prim":"nat"},{"prim":"map","args":[{"prim":"string"},{"prim":"bytes"}]}]}]},{"prim":"or","args":[{"prim":"list","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"list","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"pair","args":[{"prim":"nat"},{"prim":"nat"}]}]}]}]}]},{"prim":"list","args":[{"prim":"or","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]}]},{"prim":"pair","args":[{"prim":"address"},{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]}]}]}]}]}]}]},{"prim":"pair","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"pair","args":[{"prim":"nat"},{"prim":"big_map","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]},{"prim":"nat"}]}]}]},{"prim":"pair","args":[{"prim":"pair","args":[{"prim":"big_map","args":[{"prim":"string"},{"prim":"bytes"}]},{"prim":"big_map","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]}]},{"prim":"unit"}]}]},{"prim":"pair","args":[{"prim":"big_map","args":[{"prim":"nat"},{"prim":"pair","args":[{"prim":"nat"},{"prim":"map","args":[{"prim":"string"},{"prim":"bytes"}]}]}]},{"prim":"big_map","args":[{"prim":"nat"},{"prim":"nat"}]}]}]}]}]}]},{"prim":"UNPAIR"},{"prim":"IF_LEFT","args":[[{"prim":"IF_LEFT","args":[[{"prim":"DUP"},{"prim":"CAR"},{"prim":"MAP","args":[[{"prim":"DUP","args":[{"int":"3"}]},{"prim":"GET","args":[{"int":"5"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CDR"},{"prim":"MEM"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_TOKEN_UNDEFINED"}]},{"prim":"FAILWITH"}]]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CDR"},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"MEM"},{"prim":"IF","args":[[{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CDR"},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"434"}]},{"prim":"FAILWITH"}],[]]},{"prim":"SWAP"},{"prim":"PAIR"}],[{"prim":"PUSH","args":[{"prim":"nat"},{"int":"0"}]},{"prim":"SWAP"},{"prim":"PAIR"}]]}]]},{"prim":"NIL","args":[{"prim":"operation"}]},{"prim":"DIG","args":[{"int":"2"}]},{"prim":"CDR"},{"prim":"PUSH","args":[{"prim":"mutez"},{"int":"0"}]},{"prim":"DIG","args":[{"int":"3"}]},{"prim":"TRANSFER_TOKENS"},{"prim":"CONS"}],[{"prim":"DUP","args":[{"int":"2"}]},{"prim":"GET","args":[{"int":"5"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CDR"},{"prim":"MEM"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_TOKEN_UNDEFINED"}]},{"prim":"FAILWITH"}]]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"DIG","args":[{"int":"6"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"7"}]},{"prim":"CDR"},{"prim":"SENDER"},{"prim":"PAIR"},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"nat"},{"int":"0"}]}],[]]},{"prim":"SUB"},{"prim":"ISNAT"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_INSUFFICIENT_BALANCE"}]},{"prim":"FAILWITH"}],[]]},{"prim":"SOME"},{"prim":"DUP","args":[{"int":"6"}]},{"prim":"CDR"},{"prim":"SENDER"},{"prim":"PAIR"},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"DUP"},{"prim":"GET","args":[{"int":"6"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"DIG","args":[{"int":"4"}]},{"prim":"GET","args":[{"int":"6"}]},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CDR"},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"538"}]},{"prim":"FAILWITH"}],[]]},{"prim":"SUB"},{"prim":"ISNAT"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"538"}]},{"prim":"FAILWITH"}],[]]},{"prim":"SOME"},{"prim":"DUP","args":[{"int":"4"}]},{"prim":"CDR"},{"prim":"UPDATE"},{"prim":"UPDATE","args":[{"int":"6"}]},{"prim":"SWAP"},{"prim":"PUSH","args":[{"prim":"nat"},{"int":"0"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"GET","args":[{"int":"6"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CDR"},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"539"}]},{"prim":"FAILWITH"}],[]]},{"prim":"COMPARE"},{"prim":"EQ"},{"prim":"IF","args":[[{"prim":"SWAP"},{"prim":"DUP"},{"prim":"GET","args":[{"int":"5"}]},{"prim":"NONE","args":[{"prim":"pair","args":[{"prim":"nat"},{"prim":"map","args":[{"prim":"string"},{"prim":"bytes"}]}]}]},{"prim":"DIG","args":[{"int":"3"}]},{"prim":"CDR"},{"prim":"UPDATE"},{"prim":"UPDATE","args":[{"int":"5"}]}],[{"prim":"DROP"}]]},{"prim":"NIL","args":[{"prim":"operation"}]}]]}],[{"prim":"IF_LEFT","args":[[{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CAR"},{"prim":"CAR"},{"prim":"SENDER"},{"prim":"COMPARE"},{"prim":"EQ"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_NOT_ADMIN"}]},{"prim":"FAILWITH"}]]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"SOME"},{"prim":"DIG","args":[{"int":"6"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"7"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"DUP"},{"prim":"GET","args":[{"int":"5"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"3"}]},{"prim":"PAIR"},{"prim":"SOME"},{"prim":"DIG","args":[{"int":"4"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"3"}]},{"prim":"UPDATE"},{"prim":"UPDATE","args":[{"int":"5"}]},{"prim":"SWAP"},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"DUP"},{"prim":"GET","args":[{"int":"6"}]},{"prim":"DIG","args":[{"int":"2"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"SOME"},{"prim":"DIG","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"3"}]},{"prim":"UPDATE"},{"prim":"UPDATE","args":[{"int":"6"}]},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"PUSH","args":[{"prim":"nat"},{"int":"1"}]},{"prim":"ADD"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"}],[{"prim":"IF_LEFT","args":[[{"prim":"DUP"},{"prim":"ITER","args":[[{"prim":"DUP"},{"prim":"CDR"},{"prim":"ITER","args":[[{"prim":"SENDER"},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"COMPARE"},{"prim":"EQ"},{"prim":"IF","args":[[{"prim":"PUSH","args":[{"prim":"bool"},{"prim":"True"}]}],[{"prim":"DUP","args":[{"int":"4"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"CDR"},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"SENDER"},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"PAIR","args":[{"int":"3"}]},{"prim":"MEM"}]]},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_NOT_OPERATOR"}]},{"prim":"FAILWITH"}]]},{"prim":"DUP","args":[{"int":"4"}]},{"prim":"GET","args":[{"int":"5"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"MEM"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_TOKEN_UNDEFINED"}]},{"prim":"FAILWITH"}]]},{"prim":"PUSH","args":[{"prim":"nat"},{"int":"0"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"GET","args":[{"int":"4"}]},{"prim":"COMPARE"},{"prim":"GT"},{"prim":"IF","args":[[{"prim":"DUP"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"414"}]},{"prim":"FAILWITH"}],[]]},{"prim":"COMPARE"},{"prim":"GE"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_INSUFFICIENT_BALANCE"}]},{"prim":"FAILWITH"}]]},{"prim":"DUP"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"418"}]},{"prim":"FAILWITH"}],[]]},{"prim":"SUB"},{"prim":"ISNAT"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"418"}]},{"prim":"FAILWITH"}],[]]},{"prim":"DIG","args":[{"int":"4"}]},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"DUP"},{"prim":"DUP","args":[{"int":"7"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"9"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"DUP"},{"prim":"DUG","args":[{"int":"2"}]},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"418"}]},{"prim":"FAILWITH"}],[{"prim":"DROP"}]]},{"prim":"DIG","args":[{"int":"5"}]},{"prim":"SOME"},{"prim":"SWAP"},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"DUG","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"4"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"MEM"},{"prim":"IF","args":[[{"prim":"DIG","args":[{"int":"3"}]},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"DUP"},{"prim":"DUP","args":[{"int":"6"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"7"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"DUP"},{"prim":"DUG","args":[{"int":"2"}]},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"421"}]},{"prim":"FAILWITH"}],[]]},{"prim":"DIG","args":[{"int":"6"}]},{"prim":"GET","args":[{"int":"4"}]},{"prim":"ADD"},{"prim":"SOME"},{"prim":"SWAP"},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"DUG","args":[{"int":"2"}]}],[{"prim":"DIG","args":[{"int":"3"}]},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"GET","args":[{"int":"4"}]},{"prim":"SOME"},{"prim":"DUP","args":[{"int":"6"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DIG","args":[{"int":"6"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"DUG","args":[{"int":"2"}]}]]}],[{"prim":"DROP"}]]}]]},{"prim":"DROP"}]]},{"prim":"DROP"}],[{"prim":"DUP"},{"prim":"ITER","args":[[{"prim":"IF_LEFT","args":[[{"prim":"SENDER"},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CAR"},{"prim":"COMPARE"},{"prim":"EQ"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_NOT_OWNER"}]},{"prim":"FAILWITH"}]]},{"prim":"DIG","args":[{"int":"2"}]},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"PUSH","args":[{"prim":"option","args":[{"prim":"unit"}]},{"prim":"Some","args":[{"prim":"Unit"}]}]},{"prim":"DIG","args":[{"int":"5"}]},{"prim":"DUP"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"SWAP"},{"prim":"DUP"},{"prim":"GET","args":[{"int":"3"}]},{"prim":"SWAP"},{"prim":"CAR"},{"prim":"PAIR","args":[{"int":"3"}]},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"}],[{"prim":"SENDER"},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CAR"},{"prim":"COMPARE"},{"prim":"EQ"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_NOT_OWNER"}]},{"prim":"FAILWITH"}]]},{"prim":"DIG","args":[{"int":"2"}]},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"NONE","args":[{"prim":"unit"}]},{"prim":"DIG","args":[{"int":"5"}]},{"prim":"DUP"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"SWAP"},{"prim":"DUP"},{"prim":"GET","args":[{"int":"3"}]},{"prim":"SWAP"},{"prim":"CAR"},{"prim":"PAIR","args":[{"int":"3"}]},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"}]]}]]},{"prim":"DROP"}]]}]]},{"prim":"NIL","args":[{"prim":"operation"}]}]]},{"prim":"PAIR"}]]}],"storage":{"prim":"Pair","args":[{"prim":"Pair","args":[{"string":"${user_address}"},{"prim":"Pair","args":[{"int":"0"},[]]}]},{"prim":"Pair","args":[{"prim":"Pair","args":[[{"prim":"Elt","args":[{"string":""},{"bytes":"74657a6f732d73746f726167653a636f6e74656e74"}]},{"prim":"Elt","args":[{"string":"content"},{"bytes":"${metadata_content}"}]}],[]]},{"prim":"Pair","args":[[],[]]}]}]}}',u="ZeroTerminal";let y="";const v=new beacon.DAppClient({name:u,network:{type:c,rpcUrl:"https://rpc.tzkt.io/"+c}});async function h(e,t,r){let i="sort.desc=lastActivity&select=address,tokensCount,firstActivityTime,creator.address as creator&typeHash"+(p.indexOf(",")>=0?".in":"")+"="+p+(e?"&creator="+e:"&tokensCount.gt=0")+(t?"&limit="+t:"")+(r?"&offset="+r:"");try{let e=await fetch("https://api."+c+".tzkt.io/v1/contracts?"+i);if(e.ok)return await e.json();console.log("ERROR "+n()+"(): can't get collections")}catch(e){console.log("ERROR "+n()+"(): "+e+JSON.stringify(e))}}async function f(e){try{let t=await fetch("https://api."+c+".tzkt.io/v1/contracts/"+e+"/bigmaps/metadata/keys?key=content&select=value");if(t.ok)return(await t.json())[0];console.log("ERROR "+n()+"(): can't get collection metadata")}catch(e){console.log("ERROR "+n()+"(): "+e+JSON.stringify(e))}}async function E(e,t){let r="sort.desc=id&active=true&select=key,value"+(e?"&value.token.address="+e:"")+(t?"&value.token.id="+t:"");try{let e=await fetch("https://api."+c+".tzkt.io/v1/contracts/"+l+"/bigmaps/offers/keys?"+r);if(e.ok){let t=await e.json();if(t&&t.length>0){let e=null;for(let r of t)r.value.seller!==y&&(e?Number(e.value.price)>=Number(r.value.price)&&(e=r):e=r);return e}}else console.log("ERROR "+n()+"(): can't get best offer")}catch(e){console.log("ERROR "+n()+"(): "+e+JSON.stringify(e))}}async function I(e,t){let r="limit=1&select=account.address as account,token,balance,firstTime&token.contract="+e+"&token.tokenid="+t;try{let e=await fetch("https://api."+c+".tzkt.io/v1/tokens/balances?"+r+"&account="+y);if(e.ok){let t=await e.json();if(t.length>0)return t[0];{let e=await fetch("https://api."+c+".tzkt.io/v1/tokens/balances?"+r);if(e.ok){if(t=await e.json(),t.length>0)return t[0].account=y,t[0].balance=0,t[0]}else console.log("ERROR "+n()+"(): can't get token")}}else console.log("ERROR "+n()+"(): can't get token balance")}catch(e){console.log("ERROR "+n()+"(): "+e+JSON.stringify(e))}}const T={message:"The address is copied",type:"is-success"};async function S(){document.getElementById("btnMoreActiveTokens").classList.add("is-loading");let e=document.getElementById("dActiveTokens"),t=0,r=await async function(e,t){let r="sort.desc=lastActivity&totalSupply.gt=0&select=contract,tokenId,totalSupply,metadata&metadata.artifactUri.as=data*&limit=20"+(t?"&offset="+t:"");try{let e=await fetch("https://api."+c+".tzkt.io/v1/tokens?"+r);if(e.ok)return await e.json();console.log("ERROR "+n()+"(): can't get tokens")}catch(e){console.log("ERROR "+n()+"(): "+e+JSON.stringify(e))}}(0,P);if(document.getElementById("dActiveTokensLoader").classList.add("is-hidden"),r){for(let i of r){t++;let r=i.token?i.token:i,s=await k(r);s&&e.append(s)}t<20?document.getElementById("dMoreActiveTokens").classList.add("is-hidden"):document.getElementById("dMoreActiveTokens").classList.remove("is-hidden"),document.getElementById("btnMoreActiveTokens").classList.remove("is-loading"),0===(P+=t)&&(e.textContent="There are no on-chain tokens yet.")}else F()}bulmaToast.setDefaults({duration:5e3,position:"bottom-left",animate:{in:"zoomIn",out:"zoomOut"}}),document.addEventListener("DOMContentLoaded",(async function(){document.getElementById("appTitle").prepend(document.createTextNode(u)),m&&(document.getElementById("btnMenuConfig").classList.add("is-hidden"),document.getElementById("titleNetwork").innerHTML="&nbsp;"+("mainnet"===c?"mainnet":"testnet"),document.getElementById("titleNetwork").classList.remove("is-hidden")),"mainnet"===c?(document.getElementById("iconMainnetNotActive").classList.add("is-hidden"),document.getElementById("iconMainnetActive").classList.remove("is-hidden"),document.getElementById("iconTestnetActive").classList.add("is-hidden"),document.getElementById("iconTestnetNotActive").classList.remove("is-hidden")):(document.getElementById("titleNetwork").innerHTML="&nbsp;testnet",document.getElementById("titleNetwork").classList.remove("is-hidden"),document.getElementById("iconMainnetActive").classList.add("is-hidden"),document.getElementById("iconMainnetNotActive").classList.remove("is-hidden"),document.getElementById("iconTestnetNotActive").classList.add("is-hidden"),document.getElementById("iconTestnetActive").classList.remove("is-hidden")),await O(!0);let e=new URLSearchParams(window.location.search).get("cmd");"info"===e?await(document.getElementById("btnBurger").classList.remove("is-active"),document.getElementById("navbarMenu").classList.remove("is-active"),C(),void document.getElementById("pageInfo").classList.remove("is-hidden")):"tokens"===e?await async function(){C(),document.getElementById("dTokens").innerHTML="",document.getElementById("pageTokens").classList.remove("is-hidden");let e=new URLSearchParams(window.location.search).get("cid");e&&(b=e),await R()}():"token"===e?await async function(){C();let e=document.getElementById("btnTokenBuy"),t=document.getElementById("btnTokenList");t.classList.add("is-hidden");let s=document.getElementById("btnTokenBurn");s.classList.add("is-hidden");let n=document.getElementById("btnTokenTransfer");n.classList.add("is-hidden"),document.getElementById("dToken").classList.add("is-hidden"),document.getElementById("pageToken").classList.remove("is-hidden");let a=new URL(window.location),o=new URLSearchParams(window.location.search),m=o.get("cid");m?b=m:m=b;let c=o.get("tid");c?q=c:c=q;let d,l=document.getElementById("pageToken"),p=await I(b,c);if(p){let o;N=p,p.account===y&&p.balance>0&&(t.classList.remove("is-hidden"),s.classList.remove("is-hidden"),n.classList.remove("is-hidden")),new Promise((t=>{setTimeout((()=>{t(Promise.all([E(p.token.contract.address,p.token.tokenId),e]))}),10)})).then((e=>{e[0]&&(e[1].append(document.createTextNode((parseFloat(e[0].value.price)/1e6).toFixed(2)+" ꜩ")),e[1].addEventListener("click",(()=>U(e[0].key,e[0].value.price))),e[1].removeAttribute("disabled"))})),d=p.token.metadata?.name,l.querySelector(".js-name").innerText=d||"",d=p.token.metadata?.description,l.querySelector(".js-description").innerText=d||"";let m=l.querySelector(".js-creators"),c=l.querySelector(".js-creator");d=p.token.metadata?.creators;try{d=JSON.parse(d);for(let e=0;e<d.length;e++){let t=d[e];o=c.cloneNode(!0),o.setAttribute("href",a.pathname+"?cmd=tokens&creator="+t),o.append(document.createTextNode(r(t))),o.classList.remove("is-hidden"),m.append(o),m.append(document.createElement("br"))}}catch(e){l.querySelector(".js-creators").innerText=""}d=y&&y===p.account?p.balance:"",l.querySelector(".js-balance").innerText=d||"",d=p.token.totalSupply,l.querySelector(".js-editions").innerText=d||"",d=p.firstTime,l.querySelector(".js-firsttime").innerText=d?new Date(Date.parse(d)).toLocaleString():"";let g=p.token.contract.address;o=l.querySelector(".js-contract"),o.setAttribute("href",a.pathname+"?cmd=tokens&cid="+g),o.append(document.createTextNode(r(g))),l.querySelector(".js-contract-copy").addEventListener("click",(()=>{g&&i(g)&&bulmaToast.toast(T)})),d=p.token.tokenId,l.querySelector(".js-tokenid").innerText=d||"";let u=l.querySelector(".tags"),v=u.querySelector(".tag");d=p.token.metadata?.tags;try{d=JSON.parse(d);for(let e=0;e<d.length;e++)o=v.cloneNode(!0),o.append(document.createTextNode(d[e])),o.setAttribute("href",a.pathname+"?cmd=tokens&tag="+d[e]),o.classList.remove("is-hidden"),u.append(o)}catch(e){u.innerText=""}let h=p.token.metadata?.mimeType;if(l.querySelector(".js-type").innerText=h||"",d=p.token.metadata?.artifactUri,d){try{new URL(d),d=d.replace("ipfs://","https://ipfs.io/ipfs/")}catch(e){}h?h.startsWith("image")?(l.querySelector(".js-container-audio").remove(),l.querySelector(".js-container-video").remove(),l.querySelector(".js-container-text").remove(),l.querySelector(".js-container-data").remove(),h.startsWith("image/svg+xml")?(l.querySelector(".js-img").remove(),l.querySelector(".js-svg").setAttribute("data",d)):(l.querySelector(".js-svg").remove(),l.querySelector(".js-img").setAttribute("src",d)),l.querySelector(".js-container-img").classList.remove("is-hidden")):h.startsWith("audio")?(l.querySelector(".js-container-img").remove(),l.querySelector(".js-container-video").remove(),l.querySelector(".js-container-text").remove(),l.querySelector(".js-container-data").remove(),l.querySelector(".js-audio").setAttribute("src",d),l.querySelector(".js-container-audio").classList.remove("is-hidden")):h.startsWith("video")?(l.querySelector(".js-container-img").remove(),l.querySelector(".js-container-audio").remove(),l.querySelector(".js-container-text").remove(),l.querySelector(".js-container-data").remove(),l.querySelector(".js-video").setAttribute("src",d),l.querySelector(".js-container-video").classList.remove("is-hidden")):h.startsWith("text")?(l.querySelector(".js-container-audio").remove(),l.querySelector(".js-container-video").remove(),l.querySelector(".js-container-img").remove(),l.querySelector(".js-container-data").remove(),l.querySelector(".js-container-text").classList.remove("is-hidden")):(l.querySelector(".js-container-audio").remove(),l.querySelector(".js-container-video").remove(),l.querySelector(".js-container-img").remove(),l.querySelector(".js-container-text").remove(),l.querySelector(".js-container-data").classList.remove("is-hidden")):(l.querySelector(".js-container-audio").remove(),l.querySelector(".js-container-video").remove(),l.querySelector(".js-container-text").remove(),l.querySelector(".js-container-data").remove(),l.querySelector(".js-svg").remove(),l.querySelector(".js-img").setAttribute("src",d),l.querySelector(".js-container-img").classList.remove("is-hidden"))}document.getElementById("dToken").classList.remove("is-hidden")}}():"search"===e?await async function(){C(),document.getElementById("pageSearch").classList.remove("is-hidden")}():"collections"===e?await async function(){C(),document.getElementById("dCollections").innerHTML="",document.getElementById("pageCollections").classList.remove("is-hidden"),await L()}():"newtoken"===e?await async function(){if(C(),y?document.getElementById("btnNewTokenCreate").removeAttribute("disabled"):(document.getElementById("btnNewTokenCreate").setAttribute("disabled",""),bulmaToast.toast({message:"To create a new token you need to connect wallet.",type:"is-danger"})),document.getElementById("nftCreators").value=y,document.getElementById("pageNewToken").classList.remove("is-hidden"),y){const e=document.getElementById("nftCollection");let r=document.createElement("option");r.setAttribute("value",d),r.append(document.createTextNode("- ZeroTerminal collection -")),e.append(r),e.parentNode.classList.add("is-loading");let i=await h(y,15,A);if(i)for(let s of i){let i=await f(s.address);if(i)try{i=JSON.parse(t(i))}catch(e){continue}r=document.createElement("option"),r.setAttribute("value",s.address),r.append(document.createTextNode(i?.name)),e.append(r)}e.parentNode.classList.remove("is-loading")}}():"newcollection"===e?await async function(){C(),y?document.getElementById("btnNewCollectionCreate").removeAttribute("disabled"):(document.getElementById("btnNewCollectionCreate").setAttribute("disabled",""),bulmaToast.toast({message:"To create a new collection you need to connect wallet.",type:"is-danger"})),document.getElementById("cCreators").value=y,document.getElementById("pageNewCollection").classList.remove("is-hidden")}():"listings"===e?await async function(){C(),document.getElementById("dListings").innerHTML="",document.getElementById("pageListings").classList.remove("is-hidden"),await B()}():await async function(){C(),document.getElementById("dActiveTokens").innerHTML="",document.getElementById("pageActiveTokens").classList.remove("is-hidden"),await S()}()})),document.getElementById("dMoreActiveTokens").addEventListener("click",(()=>S())),document.getElementById("btnMoreCollections").addEventListener("click",(()=>L()));var A=0;async function L(){document.getElementById("btnMoreCollections").classList.add("is-loading");let e=document.getElementById("dCollections"),s=0,n=new URLSearchParams(window.location.search).get("creator"),a=await h(n,15,A);if(document.getElementById("dCollectionsLoader").classList.add("is-hidden"),a){for(let n of a){if(s++,0===n.tokensCount)continue;let a=await f(n.address);if(a)try{a=JSON.parse(t(a))}catch(e){continue}const o=document.getElementById("t-collection").content.cloneNode(!0);let m=a?.imageUri;if(m){try{new URL(m),m=m.replace("ipfs://","https://ipfs.io/ipfs/")}catch(e){}o.querySelector(".js-img").setAttribute("src",m)}o.querySelector(".js-name").innerText=a?.name,o.querySelector(".js-description").innerText=a?.description,o.querySelector(".js-address").prepend(document.createTextNode(r(n.address))),o.querySelector(".copy-item").addEventListener("click",(()=>{n.address&&i(n.address)&&bulmaToast.toast(T)})),o.querySelector(".js-count").innerText=n.tokensCount;let c=new URL(window.location);o.querySelectorAll(".js-collection-item").forEach((function(e){e.setAttribute("href",c.pathname+"?cmd=tokens&cid="+n.address)})),e.append(o)}s<15?document.getElementById("dMoreCollections").classList.add("is-hidden"):document.getElementById("dMoreCollections").classList.remove("is-hidden"),document.getElementById("btnMoreCollections").classList.remove("is-loading"),0===(A+=s)&&(e.textContent="There are no on-chain tokens yet.")}else F()}document.getElementById("btnMoreTokens").addEventListener("click",(()=>R()));var P=0,b="";async function R(){document.getElementById("btnMoreTokens").classList.add("is-loading");let e,t=document.getElementById("dTokens"),r=0,i=new URLSearchParams(window.location.search);if(e=i.get("account")?await async function(e,t,r){let i="sort.desc=id&select=account.address%20as%20account,token,balance&balance.gt=0&token.standard=fa2"+(e?"&account="+e:"")+"&limit=20"+(r?"&offset="+r:"")+"&token.metadata.artifactUri.as=data:*";try{let e=await fetch("https://api."+c+".tzkt.io/v1/tokens/balances?"+i);if(e.ok)return await e.json();console.log("ERROR "+n()+"(): can't get tokens")}catch(e){console.log("ERROR "+n()+"(): "+e+JSON.stringify(e))}}(i.get("account"),0,P):await async function(e,t,r,i,s,a,o,m){let d="sort.desc=id&totalSupply.gt=0&select=contract,tokenId,totalSupply,metadata&limit=20"+(t?"&offset="+t:"")+(r?"&contract.in="+r:"")+(m?"&firstMinter="+m:"")+(i?"&metadata.name="+encodeURIComponent(i):"")+"&metadata.artifactUri.as=data:"+(o||"")+"*";if(s&&s.length>0){s.sort(),d+="&metadata.creators.as=*";for(let e of s)d+='"'+e+'"*'}if(a&&a.length>0){a.sort(((e,t)=>e.localeCompare(t))),d+="&metadata.tags.as=*";for(let e of a)d+='"'+encodeURIComponent(e)+'"*'}try{let e=await fetch("https://api."+c+".tzkt.io/v1/tokens?"+d);if(e.ok)return await e.json();console.log("ERROR "+n()+"(): can't get tokens")}catch(e){console.log("ERROR "+n()+"(): "+e+JSON.stringify(e))}}(0,P,i.get("cid"),i.get("name"),i.getAll("creator"),i.getAll("tag"),i.get("type"),i.get("minter")),document.getElementById("dTokensLoader").classList.add("is-hidden"),e){for(let i of e){r++;let e=i.token?i.token:i,s=await k(e);s&&t.append(s)}r<20?document.getElementById("dMoreTokens").classList.add("is-hidden"):document.getElementById("dMoreTokens").classList.remove("is-hidden"),document.getElementById("btnMoreTokens").classList.remove("is-loading"),0===(P+=r)&&(t.textContent="There are no on-chain tokens yet.")}else F()}async function k(e){if("0"===e.totalSupply)return null;let t,i=new URL(window.location);const s=document.getElementById("t-token").content.cloneNode(!0);let n=s.querySelector(".js-price");new Promise((t=>{setTimeout((()=>{t(Promise.all([E(e.contract.address,e.tokenId),n]))}),100)})).then((e=>{e[0]&&(e[1].innerText=(parseFloat(e[0].value.price)/1e6).toFixed(2),e[1].parentNode.classList.remove("is-hidden"))}));let a=e.metadata?.name;t=s.querySelector(".js-name"),t.innerText=a||"";let o=s.querySelector(".js-creators"),m=s.querySelector(".js-creator");a=e.metadata?.creators;try{a=JSON.parse(a);for(let e=0;e<a.length;e++)t=m.cloneNode(!0),t.setAttribute("href",i.pathname+"?cmd=tokens&creator="+a[e]),t.append(document.createTextNode(r(a[e]))),e>0&&o.append(document.createTextNode(", ")),t.classList.remove("is-hidden"),o.append(t)}catch(e){s.querySelector(".js-creators").innerText=""}if(a=e.totalSupply,t=s.querySelector(".js-count"),t.innerText=a||"",a=e.metadata?.artifactUri,a){try{new URL(a),a=a.replace("ipfs://","https://ipfs.io/ipfs/")}catch(e){}let t=e.metadata?.mimeType;t?t.startsWith("image")?(s.querySelector(".js-audio").remove(),s.querySelector(".js-video").remove(),s.querySelector(".js-text").remove(),s.querySelector(".js-data").remove(),t.startsWith("image/svg+xml")?(s.querySelector(".js-img").remove(),s.querySelector(".js-svg").setAttribute("data",a),s.querySelector(".js-svg").classList.remove("is-hidden")):(s.querySelector(".js-svg").remove(),s.querySelector(".js-img").setAttribute("src",a),s.querySelector(".js-img").classList.remove("is-hidden"))):t.startsWith("audio")?(s.querySelector(".js-img").remove(),s.querySelector(".js-svg").remove(),s.querySelector(".js-video").remove(),s.querySelector(".js-text").remove(),s.querySelector(".js-data").remove(),s.querySelector(".js-audio").setAttribute("src",a),s.querySelector(".js-audio").classList.remove("is-hidden")):t.startsWith("video")?(s.querySelector(".js-img").remove(),s.querySelector(".js-svg").remove(),s.querySelector(".js-audio").remove(),s.querySelector(".js-text").remove(),s.querySelector(".js-data").remove(),s.querySelector(".js-video").setAttribute("src",a),s.querySelector(".js-video").classList.remove("is-hidden")):t.startsWith("text")?(s.querySelector(".js-img").remove(),s.querySelector(".js-svg").remove(),s.querySelector(".js-audio").remove(),s.querySelector(".js-video").remove(),s.querySelector(".js-data").remove(),s.querySelector(".js-text").classList.remove("is-hidden")):(s.querySelector(".js-img").remove(),s.querySelector(".js-svg").remove(),s.querySelector(".js-audio").remove(),s.querySelector(".js-video").remove(),s.querySelector(".js-text").remove(),s.querySelector(".js-data").classList.remove("is-hidden")):(s.querySelector(".js-audio").remove(),s.querySelector(".js-video").remove(),s.querySelector(".js-text").remove(),s.querySelector(".js-data").remove(),s.querySelector(".js-svg").remove(),s.querySelector(".js-img").setAttribute("src",a),s.querySelector(".js-img").classList.remove("is-hidden"))}return s.querySelectorAll(".js-token-item").forEach((function(t){t.setAttribute("href",i.pathname+"?cmd=token&cid="+e.contract.address+"&tid="+e.tokenId)})),s}async function B(){let e=document.getElementById("dListings"),t=new URLSearchParams(window.location.search),r=t.get("seller"),i=t.get("minprice"),s=t.get("maxprice"),a=t.get("cid"),o=t.get("tid");document.getElementById("btnMoreListings").classList.add("is-loading");let m=0,d=await async function(e,t,r,i,s,a,o){let m="sort.desc=id&active=true&select=key,value&limit=15"+(o?"&offset="+o:"")+(e?"&value.seller="+e:"")+(t?"&value.price.ge="+t:"")+(r?"&value.price.le="+r:"")+(i?"&value.token.address="+i:"")+(s?"&value.token.id="+s:"");try{let e=await fetch("https://api."+c+".tzkt.io/v1/contracts/"+l+"/bigmaps/offers/keys?"+m);if(e.ok)return await e.json();console.log("ERROR "+n()+"(): can't get offers")}catch(e){console.log("ERROR "+n()+"(): "+e+JSON.stringify(e))}}(r,i,s,a,o,0,P);if(document.getElementById("dListingsLoader").classList.add("is-hidden"),d){for(let t of d){m++;let r=await j(t);e.append(r)}m<15?document.getElementById("dMoreListings").classList.add("is-hidden"):document.getElementById("dMoreListings").classList.remove("is-hidden"),document.getElementById("btnMoreListings").classList.remove("is-loading"),0===(P+=m)&&(e.textContent="There are no listings matching these criteria.")}else F()}async function j(e){let t,i=new URL(window.location);const s=document.getElementById("t-listing").content.cloneNode(!0);let a=(await I(e.value.token.address,e.value.token.id)).token,o=a.metadata?.name;t=s.querySelector(".js-name"),t.innerText=o||"";let m=s.querySelector(".js-creators"),c=s.querySelector(".js-creator");o=a.metadata?.creators;try{o=JSON.parse(o);for(let e=0;e<o.length;e++)t=c.cloneNode(!0),t.setAttribute("href",i.pathname+"?cmd=tokens&creator="+o[e]),t.append(document.createTextNode(r(o[e]))),e>0&&m.append(document.createTextNode(", ")),t.classList.remove("is-hidden"),m.append(t)}catch(e){s.querySelector(".js-creators").innerText=""}if(o=new Date(Date.parse(e.value.time_start)).toLocaleString(),t=s.querySelector(".js-start-time"),t.innerText=o||"",o=e.value.time_expiry?new Date(Date.parse(e.value.time_expiry))?.toLocaleString():"...",t=s.querySelector(".js-expiry-time"),t.innerText=o||"",o=e.value.amount,t=s.querySelector(".js-amount"),t.innerText=o||"",o=(parseFloat(e.value.price)/1e6).toFixed(2),t=s.querySelector(".js-price"),t.innerText=o||"",o=a.metadata?.artifactUri,o){try{new URL(o),o=o.replace("ipfs://","https://ipfs.io/ipfs/")}catch(e){}let e=a.metadata?.mimeType;e?e.startsWith("image")?(s.querySelector(".js-audio").remove(),s.querySelector(".js-video").remove(),s.querySelector(".js-text").remove(),s.querySelector(".js-data").remove(),e.startsWith("image/svg+xml")?(s.querySelector(".js-img").remove(),s.querySelector(".js-svg").setAttribute("data",o),s.querySelector(".js-svg").classList.remove("is-hidden")):(s.querySelector(".js-svg").remove(),s.querySelector(".js-img").setAttribute("src",o),s.querySelector(".js-img").classList.remove("is-hidden"))):e.startsWith("audio")?(s.querySelector(".js-img").remove(),s.querySelector(".js-svg").remove(),s.querySelector(".js-video").remove(),s.querySelector(".js-text").remove(),s.querySelector(".js-data").remove(),s.querySelector(".js-audio").setAttribute("src",o),s.querySelector(".js-audio").classList.remove("is-hidden")):e.startsWith("video")?(s.querySelector(".js-img").remove(),s.querySelector(".js-svg").remove(),s.querySelector(".js-audio").remove(),s.querySelector(".js-text").remove(),s.querySelector(".js-data").remove(),s.querySelector(".js-video").setAttribute("src",o),s.querySelector(".js-video").classList.remove("is-hidden")):e.startsWith("text")?(s.querySelector(".js-img").remove(),s.querySelector(".js-svg").remove(),s.querySelector(".js-audio").remove(),s.querySelector(".js-video").remove(),s.querySelector(".js-data").remove(),s.querySelector(".js-text").classList.remove("is-hidden")):(s.querySelector(".js-img").remove(),s.querySelector(".js-svg").remove(),s.querySelector(".js-audio").remove(),s.querySelector(".js-video").remove(),s.querySelector(".js-text").remove(),s.querySelector(".js-data").classList.remove("is-hidden")):(s.querySelector(".js-audio").remove(),s.querySelector(".js-video").remove(),s.querySelector(".js-text").remove(),s.querySelector(".js-data").remove(),s.querySelector(".js-svg").remove(),s.querySelector(".js-img").setAttribute("src",o),s.querySelector(".js-img").classList.remove("is-hidden"))}let d=s.querySelector(".js-btn-buy"),p=s.querySelector(".js-btn-cancel-offer");return e.value.seller===y?(d.classList.add("is-hidden"),p.classList.remove("is-hidden"),p.addEventListener("click",(()=>async function(e){let t=event.currentTarget;t.classList.add("is-loading");let r=event.target.closest(".js-listing"),i=await async function(e){try{let t=await v.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.TRANSACTION,amount:0,destination:l,parameters:{entrypoint:"cancel_offer",value:JSON.parse('{ "int": "'+e+'" }')}}]});if(t.transactionHash)return t.transactionHash}catch(e){console.log("ERROR "+n()+"(): "+e+" "+JSON.stringify(e))}}(e);i&&(M(i),r.remove()),t.classList.remove("is-loading")}(e.key)))):(p.classList.add("is-hidden"),d.classList.remove("is-hidden"),d.addEventListener("click",(()=>U(e.key,e.value.price)))),s.querySelectorAll(".js-token-item").forEach((function(e){e.setAttribute("href",i.pathname+"?cmd=token&cid="+a.contract.address+"&tid="+a.tokenId)})),s}function w(){document.getElementById("nftType").value="",document.getElementById("nftFileName").innerHTML="Choose a file ...",document.getElementById("nftFileSizeIcon").classList.add("is-hidden"),document.getElementById("nftFileSize").innerHTML="&nbsp;";const e=document.getElementById("nftPreviewContainer");e.querySelector(".js-text").classList.add("is-hidden"),e.querySelector(".js-data").classList.add("is-hidden");let t=e.querySelector(".js-audio");t.classList.contains("is-hidden")||(t.classList.add("is-hidden"),t.setAttribute("src","")),t=e.querySelector(".js-video"),t.classList.contains("is-hidden")||(t.classList.add("is-hidden"),t.setAttribute("src","")),t=e.querySelector(".js-svg"),t&&t.remove(),t=e.querySelector(".js-img"),t.setAttribute("src",""),t.classList.remove("is-hidden")}document.getElementById("btnMoreListings").addEventListener("click",(()=>B())),document.getElementById("btnSearch").addEventListener("click",(()=>async function(){let e="";if(document.getElementById("searchListTab").classList.contains("is-active")){let t,r,i=document.getElementById("searchListMinPrice").value;if(i){if(i=Math.round(parseFloat(i)*10**6),Number.isNaN(i)||i<=0)return void bulmaToast.toast({message:"Invalid min price.",type:"is-danger"});t=i,e+="&minprice="+i}if(i=document.getElementById("searchListMaxPrice").value,i){if(i=Math.round(parseFloat(i)*10**6),Number.isNaN(i)||i<=0)return void bulmaToast.toast({message:"Invalid max price.",type:"is-danger"});r=i,e+="&maxprice="+i}if(t&&r&&t>r)return void bulmaToast.toast({message:"Invalid price range.",type:"is-danger"});if(i=document.getElementById("searchListAddress").value.trim(),i){if(!s(i))return void bulmaToast.toast({message:"Invalid token or collection address.",type:"is-danger"});e+="&cid="+i}if(i=document.getElementById("searchListSeller").value.trim(),i){if(!s(i))return void bulmaToast.toast({message:"Invalid seller address.",type:"is-danger"});e+="&seller="+i}window.location.search="cmd=listings"+e}else if(document.getElementById("searchColTab").classList.contains("is-active")){let t=document.getElementById("searchColCreator").value.trim();if(t){if(!s(t))return void bulmaToast.toast({message:"Invalid creator address.",type:"is-danger"});e+="&creator="+t}window.location.search="cmd=collections"+e}else if(document.getElementById("searchTokTab").classList.contains("is-active")){let t=document.getElementById("searchTokName").value.trim();if(t){if(t.length>200)return void bulmaToast.toast({message:"The name length must be less than 200 characters.",type:"is-danger"});e+="&name="+encodeURIComponent(t)}t=document.getElementById("searchTokCreators").value.trim().split(/\s*,\s*/).filter((e=>e.length>0));for(let r of t){if(!s(r))return void bulmaToast.toast({message:"Invalid creator address: "+r,type:"is-danger"});e+="&creator="+r.trim()}t=document.getElementById("searchTokTags").value.trim().split(/\s*,\s*/).filter((e=>e.length>0));for(let r of t){if(r.length<3)return void bulmaToast.toast({message:"The tag length must be more than 2 characters.",type:"is-danger"});e+="&tag="+encodeURIComponent(r.trim())}if(t=document.getElementById("searchTokType").value.trim(),t&&(e+="&type="+t),t=document.getElementById("searchTokMinter").value.trim(),t){if(!s(t))return void bulmaToast.toast({message:"Invalid minter address.",type:"is-danger"});e+="&minter="+t}window.location.search="cmd=tokens"+e}}())),document.getElementById("btnNewCollectionCreate").addEventListener("click",(()=>async function(){let t,r=new Map;if(t=document.getElementById("cName").value.trim(),!t)return void bulmaToast.toast({message:"The collection name must not be empty.",type:"is-danger"});if(t.length>200)return void bulmaToast.toast({message:"The name length must be less than 200 characters.",type:"is-danger"});if(r.set("name",t),t=document.getElementById("cDescription").value.trim(),t){if(t.length>2e3)return void bulmaToast.toast({message:"The description length must be less than 2000 characters.",type:"is-danger"});r.set("description",t)}if(t=document.getElementById("cSymbol").value.trim(),t&&r.set("symbol",t),t=document.getElementById("cType").value.trim(),t&&r.set("type",t),t=document.getElementById("cInterfaces").value.split(/\s*,\s*/).filter((e=>e.length>0)),t.length>0&&r.set("interfaces",t),t=document.getElementById("cAuthors").value.split(/\s*,\s*/).filter((e=>e.length>0)),t.length>0&&r.set("authors",t),t=document.getElementById("cAddresses").value.split(/\s*,\s*/).filter((e=>e.length>0)),t.length>0){for(let e of t)if(!s(e))return void bulmaToast.toast({message:"Invalid author address: "+e,type:"is-danger"});t.sort(),r.set("authoraddress",t)}if(t=document.getElementById("cCreators").value.split(/\s*,\s*/).filter((e=>e.length>0)),t.length>0){for(let e of t)if(!s(e))return void bulmaToast.toast({message:"Invalid creator address: "+e,type:"is-danger"});t.sort(),r.set("creators",t)}const i=document.getElementById("cFile").files;i.length>0&&(t=await new Promise((e=>{let t=new FileReader;t.onload=r=>e(t.result),t.readAsDataURL(i[0])})),r.set("imageUri",t)),document.getElementById("btnNewCollectionCreate").classList.add("is-loading");let a=await async function(t){let r=t.size>0?e(JSON.stringify(Object.fromEntries(t))):"";try{let e;if(g)e=g;else{let t=await fetch("./user_collection.json");t.ok&&(e=await t.text())}if(e){e=e.replaceAll("${user_address}",y),e=e.replaceAll("${metadata_content}",r);const t=await v.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.ORIGINATION,balance:"0",script:JSON.parse(e)}]});if(t.transactionHash)return t.transactionHash}else console.log("ERROR "+n()+"(): can't create collection")}catch(e){console.log("ERROR "+n()+"(): "+e+JSON.stringify(e))}}(r);a&&M(a),document.getElementById("btnNewCollectionCreate").classList.remove("is-loading")}())),document.getElementById("cFile").addEventListener("change",(()=>function(){const e=document.getElementById("cFile"),t=document.getElementById("cFileImage"),r=document.getElementById("cFileSizeIcon");if(r.classList.add("is-hidden"),e.files.length>0){let i=e.files[0];document.getElementById("cFileName").innerHTML=i.name;let s="0 Bytes";if(i.size>0){let e=["Bytes","KB","MB","GB","TB"],t=Math.floor(Math.log(i.size)/Math.log(1024));s=parseFloat((i.size/Math.pow(1024,t)).toFixed(2))+" "+e[t],i.size>10240&&(r.classList.remove("is-hidden"),r.classList.remove("has-text-danger"),r.classList.add("has-text-warning"),i.size>15360?(r.classList.remove("has-text-warning"),r.classList.add("has-text-danger"),bulmaToast.toast({message:"This file is big. Try to make it smaller.",type:"is-danger"})):bulmaToast.toast({message:"Likely this file is big. Try to make it smaller.",type:"is-warning"}))}document.getElementById("cFileSize").innerHTML=s;let n=new FileReader;n.readAsDataURL(i),n.onload=e=>{t.setAttribute("src",e.target.result)}}else document.getElementById("cFileSize").innerHTML="&nbsp;",document.getElementById("cFileName").innerHTML="Choose a file ...",t.setAttribute("src","")}())),document.getElementById("cFileRemove").addEventListener("click",(()=>(document.getElementById("cFile").value="",document.getElementById("cFileSizeIcon").classList.add("is-hidden"),document.getElementById("cFileSize").innerHTML="&nbsp;",document.getElementById("cFileName").innerHTML="Choose a file ...",void document.getElementById("cFileImage").setAttribute("src","")))),document.getElementById("btnNewTokenCreate").addEventListener("click",(()=>async function(){let t,r=new Map,i=document.getElementById("nftCollection").value;if(!i)return void bulmaToast.toast({message:"Collection must be selected.",type:"is-danger"});if(t=document.getElementById("nftName").value.trim(),t){if(t.length>200)return void bulmaToast.toast({message:"The name length must be less than 200 characters.",type:"is-danger"});r.set("name",t)}if(t=document.getElementById("nftDescription").value.trim(),t){if(t.length>200)return void bulmaToast.toast({message:"The description length must be less than 2000 characters.",type:"is-danger"});r.set("description",t)}if(t=document.getElementById("nftTags").value.trim().split(/\s*,\s*/).filter((e=>e.length>0)),t.length>0){for(let e of t)if(e.length<3)return void bulmaToast.toast({message:"The tag length must be more than 2 characters.",type:"is-danger"});t.sort(((e,t)=>e.localeCompare(t))),r.set("tags",t)}if(t=document.getElementById("nftCreators").value.trim().split(/\s*,\s*/).filter((e=>e.length>0)),t.length>0){for(let e of t)if(!s(e))return void bulmaToast.toast({message:"Invalid creator address: "+e,type:"is-danger"});t.sort(),r.set("creators",t)}t=document.getElementById("nftType").value.trim(),t&&r.set("mimeType",t),t=document.getElementById("nftRights").value.trim(),t&&r.set("rights",t),t=document.getElementById("nftDecimals").value.trim(),t&&r.set("decimals",t);let a=new Map,o=0,m=document.getElementById("pageNewToken").querySelectorAll(".js-royalties-line-data");for(let e of m){let t=e.querySelector(".js-royalties-data-address").value.trim();if(0===t.length)return void bulmaToast.toast({message:"The royalty address must not be empty.",type:"is-danger"});if(!s(t))return void bulmaToast.toast({message:"Invalid royalty address: "+t,type:"is-danger"});if(a.has(t))return void bulmaToast.toast({message:"The royalty addresses must be different.",type:"is-danger"});let r=e.querySelector(".js-royalties-data-value").value;try{r=Math.round(100*parseFloat(r))}catch(e){return void bulmaToast.toast({message:"The royalty value must be a number.",type:"is-danger"})}if(r<=0)return void bulmaToast.toast({message:"The royalty value must be greater than zero.",type:"is-danger"});if(o+=r,o>2500)return void bulmaToast.toast({message:"The maximum amount of the total royalty shall not exceed 25%.",type:"is-danger"});a.set(t,r)}a.size>0&&(t='{"decimals":4,"shares":'+JSON.stringify(Object.fromEntries(a))+"}",r.set("royalties",t));const d=document.getElementById("nftFile").files;if(!(d.length>0))return void bulmaToast.toast({message:"Media file must be selected.",type:"is-danger"});t=await new Promise((e=>{let t=new FileReader;t.onload=r=>e(t.result),t.readAsDataURL(d[0])})),r.set("artifactUri",t);let l=new Map,p=document.getElementById("pageNewToken").querySelectorAll(".js-attributes-line-data");for(let e of p){let t=e.querySelector(".js-attributes-data-name").value.trim();if(0===t.length)return void bulmaToast.toast({message:"The attribute name must not be empty.",type:"is-danger"});if(l.has(t))return void bulmaToast.toast({message:"The attribute names must be different.",type:"is-danger"});let r=e.querySelector(".js-attributes-data-value").value;l.set(t,r)}if(l.size>0){let e="[",t=!0;for(let[r,i]of l)t?t=!1:e+=",",e+='{"name":"'+r+'","value":"'+i+'"}';e+="]",r.set("attributes",e)}let g=document.getElementById("nftEditions").value;document.getElementById("btnNewTokenCreate").classList.add("is-loading");let u=await async function(t,r,i){let s="";if((i=new Map([...i].sort())).size>0){let t=!0;for(let[r,n]of i)t?t=!1:s+=",",s+='{"prim":"Elt","args":[{"string":"'+r+'"},{"bytes":"'+e("string"==typeof n||n instanceof String?n:JSON.stringify(n))+'"}]}'}let a='{"string":"'+y+'"}',o='{"int":"'+r+'"}',m="["+s+"]",d=[];try{let e='{"prim":"Pair","args":[${0},{"prim":"Pair","args":[${1},${2}]}]}';try{let r=await fetch("https://api."+c+".tzkt.io/v1/contracts/"+t+"/entrypoints/mint"),i=await r.json();2===Object.keys(i.jsonParameters["schema:object"]).length&&(e='{"prim":"Pair","args":[${0},${1}]}');for(let e of Object.keys(i.jsonParameters["schema:object"]))e.endsWith(":address")?d.push(a):e.endsWith(":nat")?d.push(o):e.endsWith(":map_flat:string:bytes")&&d.push(m)}catch(e){console.log("ERROR "+n()+"(): "+e+" "+JSON.stringify(e))}for(let t=0;t<d.length;t++)e=e.replace("${"+t+"}",d[t]);let r=await v.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.TRANSACTION,amount:0,destination:t,parameters:{entrypoint:"mint",value:JSON.parse(e)}}]});if(r.transactionHash)return r.transactionHash}catch(e){console.log("ERROR "+n()+"(): "+e+" "+JSON.stringify(e))}}(i,g,r);u&&M(u),document.getElementById("btnNewTokenCreate").classList.remove("is-loading")}())),document.getElementById("nftFile").addEventListener("change",(()=>function(){const e=document.getElementById("nftFile");if(w(),e.files.length>0){let t=e.files[0];document.getElementById("nftFileName").innerHTML=t.name;let r="0 Bytes";if(t.size>0){const e=document.getElementById("nftFileSizeIcon");let i=["Bytes","KB","MB","GB","TB"],s=Math.floor(Math.log(t.size)/Math.log(1024));r=parseFloat((t.size/Math.pow(1024,s)).toFixed(2))+" "+i[s],t.size>20480&&(e.classList.remove("has-text-danger"),e.classList.add("has-text-warning"),e.classList.remove("is-hidden"),t.size>28672?(e.classList.remove("has-text-warning"),e.classList.add("has-text-danger"),bulmaToast.toast({message:"This file is big. Try to make it smaller.",type:"is-danger"})):bulmaToast.toast({message:"Likely this file is big. Try to make it smaller.",type:"is-warning"}))}document.getElementById("nftFileSize").innerHTML=r;let i=t.type;document.getElementById("nftType").value=i;let s=new FileReader;s.onload=e=>{let t=e.target.result;const r=document.getElementById("nftPreviewContainer");if(i)if(r.querySelector(".js-img").classList.add("is-hidden"),i.startsWith("image"))if(i.startsWith("image/svg+xml")){let e=r.querySelector(".js-svg-template").cloneNode(!0);e.classList.remove("js-svg-template"),e.classList.add("js-svg"),e.setAttribute("data",t),r.append(e),e.classList.remove("is-hidden")}else r.querySelector(".js-img").setAttribute("src",t),r.querySelector(".js-img").classList.remove("is-hidden");else i.startsWith("audio")?(r.querySelector(".js-audio").setAttribute("src",t),r.querySelector(".js-audio").classList.remove("is-hidden")):i.startsWith("video")?(r.querySelector(".js-video").setAttribute("src",t),r.querySelector(".js-video").classList.remove("is-hidden")):i.startsWith("text")?r.querySelector(".js-text").classList.remove("is-hidden"):r.querySelector(".js-data").classList.remove("is-hidden");else r.querySelector(".js-img").setAttribute("src",t)},s.readAsDataURL(t)}}())),document.getElementById("nftFileRemove").addEventListener("click",(()=>(document.getElementById("nftFile").value="",void w()))),document.getElementById("btnTokenList").addEventListener("click",(()=>async function(){N&&document.getElementById("mListTokenAmount").setAttribute("max",N.balance),document.getElementById("mListToken").classList.add("is-active")}())),document.getElementById("btnListTokenList").addEventListener("click",(()=>async function(){if(!N)return void bulmaToast.toast({message:"The token is not found.",type:"is-danger"});let e=Math.round(parseFloat(document.getElementById("mListTokenPrice").value)*10**6);if(Number.isNaN(e)||e<=0)return void bulmaToast.toast({message:"Invalid price.",type:"is-danger"});let t,r=N.token.contract.address,i=N.token.tokenId,s=document.getElementById("mListTokenAmount").value;try{let e=JSON.parse(N.token.metadata.royalties);t=new Map(Object.entries(e.shares));let r=e.decimals;for(let[e,i]of t)t.set(e,Math.trunc(Number(i)/10**r*1e4))}catch(e){t=new Map}let a=document.getElementById("mListTokenStartTiime").value;a=Math.trunc(Date.parse(a)/1e3),a||(a=Math.trunc(Date.now()/1e3));document.getElementById("btnListTokenList").classList.add("is-loading");let o=await async function(e,t,r,i,s,a,o){let m="";if(s&&s.size>0){s=new Map([...s].sort());let e=0;for(let[t,r]of s)e>0&&(m+=","),e++,m+='{"prim":"Elt","args":[{"string":"'+t+'"},{"int":"'+r+'"}]}'}o=o?'"prim":"Some","args":[{"int":"'+o+'"}]':'"prim":"None"';try{let s=await v.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.TRANSACTION,amount:0,destination:t,parameters:{entrypoint:"update_operators",value:JSON.parse('[ { "prim": "Left", "args": [ { "prim": "Pair", "args": [ { "string": "'+y+'" }, { "prim": "Pair", "args": [ { "string": "'+l+'" }, { "int": "'+r+'" } ] } ] } ] } ]')}},{kind:beacon.TezosOperationType.TRANSACTION,amount:0,destination:l,parameters:{entrypoint:"add_offer",value:JSON.parse('{"prim":"Pair","args":[{"prim":"Pair","args":[{"int":"'+i+'"},{"prim":"Pair","args":[{"int":"'+e+'"},['+m+']]}]},{"prim":"Pair","args":[{'+o+'},{"prim":"Pair","args":[{"int":"'+a+'"},{"prim":"Pair","args":[{"string":"'+t+'"},{"int":"'+r+'"}]}]}]}]}')}}]});if(s.transactionHash)return s.transactionHash}catch(e){console.log("ERROR "+n()+"(): "+e+" "+JSON.stringify(e))}}(e,r,i,s,t,a,"");o&&(M(o),document.getElementById("mListToken").classList.remove("is-active")),document.getElementById("btnListTokenList").classList.remove("is-loading")}())),document.getElementById("btnTokenBurn").addEventListener("click",(()=>async function(){N&&document.getElementById("mBurnTokenAmount").setAttribute("max",N.balance),document.getElementById("mBurnToken").classList.add("is-active")}())),document.getElementById("btnBurnTokenBurn").addEventListener("click",(()=>async function(){document.getElementById("btnBurnTokenBurn").classList.add("is-loading");let e=document.getElementById("mBurnTokenAmount").value,t=await async function(e,t,r){try{let i='{"prim":"Pair","args":[{"int":"'+r+'"},{"int":"'+t+'"}]}';try{let r=await fetch("https://api."+c+".tzkt.io/v1/contracts/"+e+"/entrypoints/burn?json=false&michelson=true");(await r.json()).michelsonParameters.startsWith("pair")||(i='{"int":"'+t+'"}')}catch(e){}let s=await v.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.TRANSACTION,amount:0,destination:e,parameters:{entrypoint:"burn",value:JSON.parse(i)}}]});if(s.transactionHash)return s.transactionHash}catch(e){console.log("ERROR "+n()+"(): "+e+" "+JSON.stringify(e))}}(b,q,e);t&&(M(t),window.history.back()),document.getElementById("btnBurnTokenBurn").classList.remove("is-loading")}())),document.getElementById("btnTokenTransfer").addEventListener("click",(()=>async function(){N&&document.getElementById("mTransferTokenAmount").setAttribute("max",N.balance),document.getElementById("mTransferTokenAddressTo").value="",document.getElementById("mTransferToken").classList.add("is-active")}())),document.getElementById("btnTransferTokenTransfer").addEventListener("click",(()=>async function(){let e=document.getElementById("mTransferTokenAmount").value,t=document.getElementById("mTransferTokenAddressTo").value.trim();if(!s(t))return void bulmaToast.toast({message:"Invalid destination address.",type:"is-danger"});document.getElementById("btnTransferTokenTransfer").classList.add("is-loading");let r=await async function(e,t,r,i){try{let s=await v.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.TRANSACTION,amount:0,destination:e,parameters:{entrypoint:"transfer",value:JSON.parse('[{"prim": "Pair","args":[{"string":"'+y+'"},[{"prim": "Pair","args":[{"string":"'+i+'"},{"prim": "Pair","args":[{"int":"'+t+'"},{"int":"'+r+'"}]}]}]]}]')}}]});if(s.transactionHash)return s.transactionHash}catch(e){console.log("ERROR "+n()+"(): "+e+" "+JSON.stringify(e))}}(b,q,e,t);r&&(M(r),document.getElementById("mTransferToken").classList.remove("is-active")),document.getElementById("btnTransferTokenTransfer").classList.remove("is-loading")}()));var N,q="";async function U(e,t){let r=event.currentTarget;r.classList.add("is-loading");let i=await async function(e,t,r){try{let t=await v.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.TRANSACTION,amount:1*r,destination:l,parameters:{entrypoint:"accept_offer",value:JSON.parse('{"prim":"Pair","args":[{"int":"1"},{"int":"'+e+'"}]}')}}]});if(t.transactionHash)return t.transactionHash}catch(e){console.log("ERROR "+n()+"(): "+e+" "+JSON.stringify(e))}}(e,0,t);i&&M(i),r.classList.remove("is-loading")}function D(){let e=event.currentTarget.querySelector(".fas");event.currentTarget.parentElement.querySelector(".is-collapsible").classList.toggle("is-active"),e.classList.toggle("fa-angle-down"),e.classList.toggle("fa-angle-up")}async function O(e){let t=y;await async function(e){let t=await v.getActiveAccount();if(t)y=t.address;else if(!e){let e=await v.requestPermissions({network:{type:c}});y=e.address}}(e),y&&(document.getElementById("divConnect").classList.add("is-hidden"),document.getElementById("aAddress").innerHTML=r(y),document.getElementById("divDisconnect").classList.remove("is-hidden")),e||t===y||window.location.reload()}function C(){document.querySelectorAll(".js-page").forEach((function(e){e.classList.add("is-hidden")}))}function M(e){bulmaToast.toast({message:"Your request is processing with ID <a href='https://"+c+".tzkt.io/"+e+"' target='_blank'>"+r(e)+"</a>",duration:5e3,type:"is-success"})}function F(){bulmaToast.toast({message:"The data cannot be retrieved at this moment.<br/>Please try again later.",duration:7e3,type:"is-warning"})}document.querySelectorAll(".js-faq-item").forEach((function(e){e.onclick=D})),document.getElementById("btnConnect").addEventListener("click",(()=>O(!1))),document.getElementById("btnDisconnect").addEventListener("click",(()=>async function(){await async function(){await v.clearActiveAccount(),y=""}(),y||(document.getElementById("divDisconnect").classList.add("is-hidden"),document.getElementById("aAddress").innerHTML="",document.getElementById("divConnect").classList.remove("is-hidden")),window.location.reload()}())),document.getElementById("btnMenuTokens").addEventListener("click",(()=>{window.location.search="cmd=tokens"})),document.getElementById("btnMenuCollections").addEventListener("click",(()=>{window.location.search="cmd=collections"})),document.getElementById("btnMenuListings").addEventListener("click",(()=>{window.location.search="cmd=listings"})),document.getElementById("btnMenuSearch").addEventListener("click",(()=>{window.location.search="cmd=search"})),document.getElementById("btnMenuNewToken").addEventListener("click",(()=>{window.location.search="cmd=newtoken"})),document.getElementById("btnMenuNewCollection").addEventListener("click",(()=>{window.location.search="cmd=newcollection"})),document.getElementById("btnMenuInfo").addEventListener("click",(()=>{window.location.search="cmd=info"})),document.getElementById("btnMenuCopyAddress").addEventListener("click",(()=>{y&&i(y)&&bulmaToast.toast(T)})),document.getElementById("btnMenuMyCollections").addEventListener("click",(()=>{window.location.search="cmd=collections&creator="+y})),document.getElementById("btnMenuMyTokens").addEventListener("click",(()=>{window.location.search="cmd=tokens&account="+y})),document.getElementById("btnMenuMyListings").addEventListener("click",(()=>{window.location.search="cmd=listings&seller="+y})),LT={}})();